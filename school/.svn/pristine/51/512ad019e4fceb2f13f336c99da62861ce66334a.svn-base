Ext.define("School.util.AddTab",{statics:{addTab:function(e,t,o,a,l,i){var d=a?a:"menu_profile",n=e.items.findBy(function(e){return e.title===t});if(!n){var r={xtype:o,closable:!0,iconCls:d,title:t};if(i)for(var s in i)r.key=i.key;l&&(r.itemId=l),n=e.add(r)}return e.setActiveTab(n),n}}}),Ext.define("School.util.AuthUtil",{statics:{hideBtn:function(e,t){t=t||Ext.ComponentQuery.query("mainpanel").getActiveTab();var o=t.query("[permissionId]");e=JSON.stringify(e);for(var a=0,l=o.length;l>a;a++)-1===e.indexOf(o[a].permissionId)&&("actioncolumn"===o[a].getXType()?(o[a].destroy(),console.log("destroy"+o[a].getItemId())):o[a].hide())},doBtnPermission:function(e,t,o){var a={};a.moduleId=e,o&&(a.classId=o),Ext.Ajax.request({scope:this,url:"/school/permission/user_module_permission_list.action",params:a,failure:function(e){School.util.Util.showErrorMsg("无法获取按钮权限")},success:function(e){var o=School.util.Util.decodeJSON(e.responseText),a=o.permissions;this.hideBtn(a,t)}})}}}),Ext.define("School.util.ComponentColumn",{alias:"widget.componentcolumn",extend:"Ext.grid.column.Column",requires:["School.util.CTemplate"],autoWidthComponents:!0,componentGC:!0,hasCustomRenderer:!0,lastFrameWidth:12,widthUpdateDelay:[10,400],constructor:function(e){var t=this;t.callParent(arguments),t.compIds=[],t.dataIndex=t.dataIndex||Ext.id(null,"cc-dataIndex-"),t.tpl=t.createTemplate(t.tpl),t.renderer=t.createRenderer(t.renderer),t.registerColumnListeners()},addRefOwner:function(e){var t=this,o=t.refOwnerFn||(t.refOwnerFn=function(){return t});t.extVersion<40200?e.getBubbleTarget=o:e.getRefOwner=o},applyTemplate:function(e,t){return Ext.isDefined(t)&&(e[this.dataIndex]=t),this.tpl.apply(e)},beforeViewRefresh:function(){if(Ext.isIE)for(var e,t,o,a=this.compIds,l=0,i=a.length;i>l;l++)(e=Ext.getCmp(a[l]))&&(t=e.getEl())&&(t=t.dom)&&(o=t.parentNode)&&o.removeChild(t)},calculateFrameWidth:function(e){var t=e.getEl(),o=t&&t.parent(),a=o&&o.parent();return a?this.lastFrameWidth=o.getFrameWidth("lr")+a.getFrameWidth("lr"):void 0},createRenderer:function(e){var t=this;return function(o,a,l){var i=Ext.apply({},l.data,l.getAssociatedData());return e&&(o=e.apply(this,arguments)),o=t.processValue(o),t.applyTemplate(i,o)}},createTemplate:function(e){return e&&e.isTemplate?e:Ext.create("School.util.CTemplate",e||["{",this.dataIndex,"}"])},destroyChild:function(e){e.destroy()},getRefItems:function(e){for(var t,o=this.callParent([e]),a=this.compIds,l=0,i=a.length;i>l;l++)(t=Ext.getCmp(a[l]))&&(o.push(t),e&&t.getRefItems&&o.push.apply(o,t.getRefItems(!0)));return o},onChildAfterRender:function(e){this.resizeChild(e)},onChildBoxReady:function(e){this.resizeChild(e,!1)},onChildDestroy:function(e){Ext.Array.remove(this.compIds,e.getId())},onChildResize:function(){this.redoScrollbars()},onColumnResize:function(e){e.resizeAll()},onColumnShow:function(e){e.resizeAll()},onColumnVisibilityChange:function(e){var t=e.getRefItems(),o=0,a=t.length,l=!e.isHidden();for(Ext.suspendLayouts&&Ext.suspendLayouts();a>o;++o)t[o].setVisible(l);Ext.resumeLayouts&&Ext.resumeLayouts(!0)},onDestroy:function(){Ext.destroy(this.getRefItems()),this.callParent()},onRender:function(){this.registerViewListeners(),this.callParent(arguments)},onViewChange:function(){var e=this,t=e.tpl;e.suspendResizing(),t.isCTemplate&&(t.injectComponents(),t.reset()),e.redoScrollbars(),e.resumeResizing(),e.performGC()},performGC:function(){for(var e,t,o=this.compIds,a=o.length-1;a>=0;--a)e=Ext.getCmp(o[a]),t=e&&e.getEl(),t&&(!this.componentGC||t.dom&&Ext.getDom(Ext.id(t))===t.dom)||e&&!e.isDestroyed&&e.destroy()},processValue:function(e){var t,o,a,l,i=this,d=i.compIds;return Ext.isObject(e)&&!e.isComponent&&e.xtype&&(e=Ext.widget(e.xtype,e)),e&&e.isComponent&&(t=e.getId(),Ext.Array.contains(d,t)||d.push(t),i.addRefOwner(e),i.registerListeners(e),e.rendered?Ext.isIE&&(a=e.el.dom,l=a.parentNode,l&&(40101===i.extVersion&&Ext.core.DomHelper.insertBefore(a,{tag:"p"}),l.removeChild(a))):i.autoWidthComponents&&(o=i.getWidth()-i.lastFrameWidth,o=o>4?o:4,e.setWidth(o)),(Ext.isIE6||Ext.isIE7)&&i.isHidden()&&e.hide()),e},redoScrollbars:function(){var e=this,t=e.up("tablepanel");if(t){if(e.resizeQueue)return void(e.redoScrollbarsRequired=!0);e.extVersion<40100?(t.invalidateScroller(),t.determineScrollbars()):t.doLayout()}},registerColumnListeners:function(){var e=this;e.autoWidthComponents&&(e.on("resize",e.onColumnResize),e.on("show",e.onColumnShow)),(Ext.isIE6||Ext.isIE7)&&e.on({hide:e.onColumnVisibilityChange,show:e.onColumnVisibilityChange})},registerListeners:function(e){var t=this;e.on("destroy",t.onChildDestroy,t),t.autoWidthComponents&&(e.on("afterrender",t.onChildAfterRender,t,{single:!0}),!t.extVersion<40100&&e.on("boxready",t.onChildBoxReady,t,{single:!0})),e.on("resize",t.onChildResize,t)},registerViewListeners:function(){var e=this,t=e.up("tablepanel").getView();e.mon(t,"beforerefresh",e.beforeViewRefresh,e),e.mon(t,"refresh",e.onViewChange,e),e.mon(t,"itemupdate",e.onViewChange,e),e.mon(t,"itemadd",e.onViewChange,e),e.mon(t,"itemremove",e.onViewChange,e)},resizeAll:function(){var e=this;e.suspendResizing(),e.resizeQueue=e.getRefItems(),e.resumeResizing()},resizeChild:function(e,t){var o,a,l,i,d=this;return d.resizingSuspended?(i=d.resizeQueue,void(Ext.Array.contains(i,e)||i.push(e))):(o=d.calculateFrameWidth(e),void(Ext.isNumber(o)&&(a=d.getWidth()-o,l=e.getWidth(),d.setChildWidth(e,a,l)&&t!==!1&&Ext.each(d.widthUpdateDelay,function(t){Ext.defer(d.resizeChild,t,d,[e,!1])}))))},resumeResizing:function(){var e=this,t=0,o=e.resizeQueue,a=o.length;if(!--e.resizingSuspended){for(;a>t;++t)e.resizeChild(o[t]);e.resizeQueue=null,e.redoScrollbarsRequired&&e.redoScrollbars()}},setChildWidth:function(e,t,o){return o===t?!1:(e.setWidth(t),!0)},suspendResizing:function(){var e=this;e.resizingSuspended=(e.resizingSuspended||0)+1,e.resizeQueue||(e.resizeQueue=[])}},function(e){var t=e.prototype,o=Ext.getVersion();t.extVersion=100*(100*o.getMajor()+o.getMinor())+o.getPatch(),Ext.Element.prototype.syncContent&&"4.1.0"===o.toString()&&(t.extVersion=40101)}),Ext.define("School.util.CTemplate",{extend:"Ext.XTemplate",statics:{AUTO_ID:0},copyDepth:10,cTpl:'<p id="ctemplate-{0}-{1}"></p>',isCTemplate:!0,constructor:function(){var e=this;e.callParent(arguments),e.id=++e.statics().AUTO_ID,e.reset()},copyValues:function(e,t){var o,a=this,l={},i=t||a.copyDepth;return 1===i?e:Ext.isArray(e)?Ext.Array.map(e,function(e){return a.copyValues(e,i-1)}):Ext.isObject(e)?e.isComponent?(o=e.getId(),a.ids.push(o),Ext.String.format(a.cTpl,o,a.id)):(Ext.Object.each(e,function(e,t){l[e]="$comp"===e?t:a.copyValues(t,i-1)}),l):e},doInsert:function(){var e=this.callParent(arguments);return this.injectComponents(),e},doPolling:function(e){var t=this;t.pollInterval=e,t.pollId&&clearTimeout(t.pollId),t.pollId=Ext.defer(t.injectComponents,e,t)},getPlaceholderEl:function(e){return Ext.get("ctemplate-"+e+"-"+this.id)},injectComponents:function(){for(var e,t,o,a=this,l=a.ids,i=l.length-1;i>=0;--i)e=l[i],t=Ext.getCmp(e),o=a.getPlaceholderEl(e),(a.renderComponent(t,o)||!t)&&(Ext.Array.splice(l,i,1),o&&o.remove());l.length&&a.doPolling(1.5*a.pollInterval)},overwrite:function(e){var t,o,a;if(Ext.isIE)for(t=Ext.getDom(e);o=t.firstChild;)t.removeChild(o);return a=this.callParent(arguments),this.injectComponents(),a},renderComponent:function(e,t){if(e&&t){var o=t.parent();return e.rendered?e.getEl().replace(t):e.render(o,t),Ext.isIE6&&o.repaint(),!0}return!1},reset:function(){var e=this;e.ids=[],e.pollId&&(clearTimeout(e.pollId),e.pollId=null)}},function(e){var t=function(){var e=this,t=Ext.Array.slice(arguments);return t[0]=e.copyValues(t[0]),e.doPolling(10),e.callParent(t)};e.prototype.applyOut?e.override({applyOut:t}):(e.override({applyTemplate:t}),e.createAlias("apply","applyTemplate"))}),Ext.define("School.util.FailureProcess",{singleton:!0,alternateClassName:"School.FailureProcess",requires:["Ext.Msg"],Ajax:function(e,t){404==e.status?Ext.Msg.alert("错误信息","错误的请求地址。"):500==e.status?Ext.Msg.alert("错误信息","服务器内部错误。"):Ext.Msg.alert("错误信息",Ext.String.format("错误代码：{0}<br>响应：{1}",e.status,e.responseText))},Proxy:function(e,t,o,a){var l=t.status;l>=200&&300>l||304==l?Ext.Msg.alert("信息",o.error):School.FailureProcess.Ajax(t,o)},Form:function(e,t){var o=t.response.status;o>=200&&300>o||304==o?void 0===t.result.errors&&Ext.Msg.alert("信息",t.result.msg):School.FailureProcess.Ajax(t.response)}}),Ext.define("School.util.Format",{extend:"Ext.data.proxy.Ajax",alias:"proxy.format",requires:["School.util.FailureProcess"],reader:{type:"json",root:"data",messageProperty:"msg"},writer:{type:"json",encode:!0,root:"data",allowSingle:!1},listeners:{exception:function(){School.FailureProcess.Proxy.apply(this,arguments)}}}),Ext.define("School.util.MD5",{statics:{encode:function(e){return $.md5(e)}}}),Ext.define("School.util.PostProxy",{extend:"Ext.data.proxy.Ajax",alias:"proxy.postproxy",config:{actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"}}}),Ext.define("School.util.SessionMonitor",{singleton:!0,requires:["Ext.window.Window"],interval:1e4,lastActive:null,maxInactive:12e5,remaining:0,ui:Ext.getBody(),window:Ext.create("Ext.window.Window",{bodyPadding:5,closable:!1,closeAction:"hide",modal:!0,resizable:!1,title:"session超时提示",width:325,items:[{xtype:"container",frame:!0,html:"由于您长时间未进行任何操作，系统将会自动退出"},{xtype:"label",text:""}],buttons:[{text:"继续登陆",handler:function(){Ext.TaskManager.stop(School.util.SessionMonitor.countDownTask),School.util.SessionMonitor.window.hide(),School.util.SessionMonitor.start(),Ext.create("School.store.school.TeacherMgr").reload()}},{text:"退出登陆",action:"logout",handler:function(){Ext.TaskManager.stop(School.util.SessionMonitor.countDownTask),School.util.SessionMonitor.window.hide(),Ext.ComponentQuery.query("#logout")[0].fireEvent("click",Ext.ComponentQuery.query("#logout")[0])}}]}),constructor:function(e){var t=this;this.sessionTask={run:t.monitorUI,interval:t.interval,scope:t},this.countDownTask={run:t.countDown,interval:1e3,scope:t}},captureActivity:function(e,t,o){this.lastActive=new Date},monitorUI:function(){var e=new Date,t=e-this.lastActive;t>=this.maxInactive&&(this.stop(),this.window.show(),this.remaining=60,Ext.TaskManager.start(this.countDownTask))},start:function(){this.lastActive=new Date,this.ui=Ext.getBody(),this.ui.on("mousemove",this.captureActivity,this),this.ui.on("keydown",this.captureActivity,this),Ext.TaskManager.start(this.sessionTask)},stop:function(){Ext.TaskManager.stop(this.sessionTask),this.ui.un("mousemove",this.captureActivity,this),this.ui.un("keydown",this.captureActivity,this)},countDown:function(){this.window.down("label").update("自动退出剩余时间为： "+this.remaining+" 秒"+(1==this.remaining?".":"s.")),--this.remaining,this.remaining<0&&this.window.down('button[action="logout"]').handler()}}),Ext.define("School.util.Sortable",{statics:{overrideSort:function(){Ext.data.Store.prototype.createComparator=function(e){return function(t,o){var a=e[0],l=a.property,i=t.data[l],d=o.data[l],n=0;"string"==typeof i?(n=i.localeCompare(d),"DESC"==a.direction&&(n*=-1)):n=e[0].sort(t,o);for(var r=e.length,s=1;r>s;s++)a=e[s],l=a.property,i=t.data[l],d=o.data[l],"string"==typeof i?(n=n||i.localeCompare(d),"DESC"==a.direction&&(n*=-1)):n=n||a.sort.call(this,t,o);return n}}}}}),Ext.define("School.util.Update",{statics:{onDeleteButtonClick:function(e,t,o,a,l){Ext.Ajax.request({url:zyHost+t,timeout:6e4,params:o,success:function(t,o,i,d){var n=School.util.Util.decodeJSON(t.responseText),r=n.msg||"";return n.success?(e&&(a=a||{},e.reload({params:a})),l&&l(),void School.util.Util.showSuccessMsg("删除成功!")):void School.util.Util.showErrorMsg("删除失败!"+r)},failure:function(t,o,a,l){e.removeAll(),School.util.Util.showErrorMsg("链接服务器失败！")}})},onSaveButtonClick:function(e,t,o,a,l,i,d){e.mask("正在保存，请耐心等待...","splashscreen"),Ext.Ajax.request({url:zyHost+t,method:"POST",timeout:6e4,params:a,success:function(t,a){var n=School.util.Util.decodeJSON(t.responseText);return e.unmask(),n.success?(e.close(),School.util.Util.showSuccessMsg("保存成功！"+(l?l:"")),o&&(i?o.load({params:i}):o.reload()),void(d&&d())):(School.util.Util.showErrorMsg("保存失败！"),void e.close())},failure:function(t,o){e.unmask(),School.util.Util.showErrorMsg("链接服务器失败！")}})}}}),Ext.define("School.util.Util",{statics:{required:'<span style="color:red;font-weight:bold" data-qtip="Required">*</span>',decodeJSON:function(e){var t=Ext.JSON.decode(e,!0);return t||(t={},t.success=!1,t.msg=e),t},createEditWin:function(e,t,o,a){var l=e.getSelectionModel().getSelection(),i={};return l[0]?(i=Ext.create(t,{itemId:"edit",title:o,autoShow:!0}),void i.down("form").loadRecord(l[0])):(School.util.Util.showWarningMsg(a),0)},showErrorMsg:function(e){Ext.Msg.show({title:"错误",msg:e,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK})},showSuccessMsg:function(e){Ext.Msg.show({title:"成功",msg:e,icon:Ext.Msg.INFO,buttons:Ext.Msg.OK})},showWarningMsg:function(e){Ext.Msg.show({title:"警告",msg:e,icon:Ext.Msg.WARNING,buttons:Ext.Msg.OK})},confirm:function(e,t){Ext.Msg.confirm({title:"警告",msg:"您确定要"+e+"?",icon:Ext.Msg.WARNING,buttons:Ext.Msg.YESNO,fn:t})},setProxy:function(e,t,o,a,l){a=a?a:25,l=l?l:"totalCount";var i={type:"postproxy",url:zyHost+e,reader:{type:"json",totalProperty:l,root:o}};return t&&(i.extraParams=t),i},downloadFile:function(e,t){if(!Ext.fly("downForm")){var o=document.createElement("form");o.id="downForm",o.name="downForm",o.className="x-hidden",o.action=zyHost+e,o.method="post",document.body.appendChild(o)}t&&$(o).html(t),Ext.fly("downForm").dom.submit(),Ext.fly("downForm")&&document.body.removeChild(o)},uploadFile:function(e,t,o,a,l,i,d){var n=e.up("form").getForm(),i=i||".xls",r=e.up("form").down("filefield").getValue(),s=r.length;return n.isValid()?-1===i.indexOf(r.substr(s-4,5).toLowerCase())?void School.util.Util.showErrorMsg(a):void n.submit({url:zyHost+t,params:o,method:"post",waitMsg:"正在上传...",success:function(t,o){School.util.Util.showSuccessMsg("提交成功！"),e.up("window").close(),l&&l.reload(),d&&d()},failure:function(){School.util.Util.showErrorMsg("文件上传失败！")}}):(School.util.Util.showErrorMsg("请选择文件"),0)},getInner:function(){return"undefined"!=typeof window.innerWidth?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},unique:function(e){var t=[];return t=e.filter(function(e,t,o){return o.indexOf(e)==t})},getOtherValue:function(e,t,o,a){var l=t.getCount();o=o?o:"id",a=a?a:"name";for(var i=0;l>i;i++)if(t.getAt(i).get(o)===e)return t.getAt(i).get(a);return""},setComboboxValue:function(e,t,o,a){var l=e.getStore();l.reload({callback:function(){for(var i=0,d=l.getCount();d>i;i++)if(l.getAt(i).get(t)===a){e.setValue(l.getAt(i).get(o));break}}})},cascadeNode:function(e,t){function o(e){var t=!1;return e.hasChildNodes()&&Ext.each(e.childNodes,function(e){if(e.isLeaf()){if(t=e.get("checked"))return!1}else if(t=o(e))return!1}),t}var a=e.parentNode;e.checked=t;var l=e.isLeaf();if(!l){for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].checked=t;e.cascadeBy(function(e){e.set("checked",t)})}if(1==t)for(;null!=a&&!a.get("checked");a=a.parentNode)a.set("checked",!0);else for(;null!=a&&!o(a);a=a.parentNode)a.set("checked",!1)},compressImg:function(e){function t(e,t,o){t=t||"",o=o||512;for(var a=atob(e),l=[],i=0;i<a.length;i+=o){for(var d=a.slice(i,i+o),n=new Array(d.length),r=0;r<d.length;r++)n[r]=d.charCodeAt(r);var s=new Uint8Array(n);l.push(s)}var c=new Blob(l,{type:t});return c}var o,a,l,i,d,n,r,s,c=new Image,m=.75,x=document.createElement("canvas"),h=x.getContext("2d");x.style.display="none",o=c.width,a=c.height,l=o,i=a,l>i&&(a=l,o=i);var u,p=o/a,g=60;for(p>.5625&&1>=p?1664>a?(g=l*i/Math.pow(1664,2)*150,g=Math.max(60,g)):a>=1664&&4990>a?(l=o/2,i=a/2,u=2,g=l*i/Math.pow(2495,2)*300,g=Math.max(60,g)):a>=4990&&10240>a?(l=o/4,i=a/4,u=4,outputFileMaxLenght=l*i/Math.pow(2560,2)*300,outputFileMaxLenght=Math.max(100,outputFileMaxLenght)):(d=a/1280==0?1:a/1280,l=o/d,i=a/d,u=d,outputFileMaxLenght=l*i/Math.pow(2560,2)*300,outputFileMaxLenght=Math.max(100,outputFileMaxLenght)):p>.5&&.5625>=p?(d=a/1280==0?1:a/1280,l=o/d,i=a/d,u=d,outputFileMaxLenght=l*i/3686400*300,outputFileMaxLenght=Math.max(100,outputFileMaxLenght)):(d=Math.ceil(o/1280),l=o/d,i=a/d,u=d,outputFileMaxLenght=500),c.onload=function(){h.clearRect(0,0,x.width,x.height),x.width=c.width,x.height=c.height,h.drawImage(c,0,0,l,i),n=x.toDataURL("image/jpg",1),r=n.replace(/^data:image\/(png|jpg);base64,/,"")},c.src=e,s=t(r,"image/jpg").size;s>204800;)h.clearRect(0,0,x.width,x.height),i/=1.1,l/=1.1,m-=.06,x.width=c.width,x.height=c.height,h.drawImage(c,0,0,l,i),n=x.toDataURL("image/jpg",m),r=n.replace(/^data:image\/(png|jpg);base64,/,""),s=t(r,"image/jpg").size;return c.src=n,n}}}),Ext.define("School.model.area.AreaMgr",{extend:"Ext.data.Model",fields:["id","address","name","areaName","email","phone","loginCountMap.loginParentPercentage","loginCountMap.loginTeacherPercentage","postcode","type","website"]}),Ext.define("School.model.area.AreaQuery",{extend:"Ext.data.Model",fields:["id","parentId","name","leave"]}),Ext.define("School.model.area.ClassLogin",{extend:"Ext.data.Model",fields:["IDCard","className","lastLogin","parentName","studentName"]}),Ext.define("School.model.area.SchoolMgr",{extend:"Ext.data.Model",fields:["id","name","address","phone","postcode","email","website","logo"]}),Ext.define("School.model.area.TeacherLastLogin",{extend:"Ext.data.Model",fields:["name","phone","email","loginStatus"]}),Ext.define("School.model.area.VisitorVolumn",{extend:"Ext.data.Model",fields:["name","count"]}),Ext.define("School.model.auth.ArrangeModule",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"name",type:"string"},{name:"modules",type:"auto"}]}),Ext.define("School.model.auth.ArrangeRole",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"roles",type:"auto"},{name:"name",type:"string"}]}),Ext.define("School.model.auth.BtnPermission",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"permission",type:"auto"},{name:"description",type:"string"},{name:"available",type:"boolean"}]}),Ext.define("School.model.auth.Module",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"text",type:"string"},{name:"className",type:"string"},{name:"iconCls",type:"string"},{name:"menu_admin",type:"string"},{name:"leaf",type:"boolean"},{name:"parentId",type:"string"},{name:"imageurl",type:"string"},{name:"check",type:"boolean"}]}),Ext.define("School.model.auth.Role",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"role",type:"string"},{name:"description",type:"string"},{name:"available",type:"boolean",defaultValue:!1}]}),Ext.define("School.model.auth.User",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"username",type:"string"},{name:"password",type:"string"},{name:"realName",type:"string"},{name:"signPicUrl",type:"string"},{name:"createTime",type:"string"},{name:"superUser",type:"boolean"},{name:"active",type:"boolean"}]}),Ext.define("School.model.menu.Item",{extend:"Ext.data.Model",uses:["School.model.menu.Root"],idProperty:"id",fields:[{name:"text"},{name:"iconCls"},{name:"className"},{name:"id"},{name:"parent_id"}],belongsTo:{model:"School.model.menu.Root",foreignKey:"parent_id"}}),Ext.define("School.model.menu.Root",{extend:"Ext.data.Model",uses:["School.model.menu.Item"],idProperty:"id",fields:[{name:"text"},{name:"iconCls"},{name:"id"}],hasMany:{model:"School.model.menu.Item",foreignKey:"parent_id",name:"items"}}),Ext.define("School.model.clazz.Appraise",{extend:"Ext.data.Model",fields:[{name:"gclass"},{name:"id"},{name:"parentId"},{name:"picurl"},{name:"studentName"},{name:"studentId"},{name:"studentNumber"},{name:"star"},{name:"word"},{name:"time"}]}),Ext.define("School.model.clazz.CommentMgr",{extend:"Ext.data.Model",fields:["createTime","id","name","schoolId","score","type","uploaderId","url"]}),Ext.define("School.model.clazz.FileContact",{extend:"Ext.data.Model",fields:["name","leaf"]}),Ext.define("School.model.clazz.FileShare",{extend:"Ext.data.Model",fields:["id","name","uploader","uploadTime","size","type","filePath"]}),Ext.define("School.model.clazz.Getstudentmgr",{extend:"Ext.data.Model",fields:["headTeacher","id","name"]}),Ext.define("School.model.clazz.GradeStore",{extend:"Ext.data.Model",fields:["name","id","level"]}),Ext.define("School.model.clazz.Health",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"studentName"},{name:"studentId"},{name:"height"},{name:"weight"},{name:"bloodType"},{name:"bloodPressure"},{name:"leftVision"},{name:"rightVision"},{name:"leftListen"},{name:"rightListen"},{name:"oral"},{name:"historyMedical"},{name:"allergy"},{name:"bodyTem"},{name:"remarks"}]}),Ext.define("School.model.clazz.PostMgr",{extend:"Ext.data.Model",fields:["id","tMId","title","context","createTime","praisesCount","repliesCount","publisherName","urls"]}),Ext.define("School.model.clazz.SelectSchoolGrade",{extend:"Ext.data.Model",fields:["name","id","level"]}),Ext.define("School.model.clazz.Subject",{extend:"Ext.data.Model",fields:[{name:"name"},{name:"comment"},{name:"id"},{name:"tScSchoolId"},{name:"tScTeacherId"},{name:"createTime"}]}),Ext.define("School.model.clazz.WordTpl",{extend:"Ext.data.Model",fields:[{name:"field"},{name:"school_id"},{name:"subject"},{name:"word"}]}),Ext.define("School.model.multimedia.AlbumMgr",{extend:"Ext.data.Model",fields:["id","name","updateTime","photoCount2"]}),Ext.define("School.model.multimedia.CheckPhoto",{extend:"Ext.data.Model",fields:["id","name","videoPath"]}),Ext.define("School.model.multimedia.GradeResource",{extend:"Ext.data.Model",fields:["gradeId","id","name","isLink","resourcepath","uploadTime","typeName","schoolId","typeId"]}),Ext.define("School.model.multimedia.LearningCenter",{extend:"Ext.data.Model",fields:["id","name"]}),Ext.define("School.model.multimedia.PhotoMgr",{extend:"Ext.data.Model",fields:["id","name","videoPath","uploadTime","description","sort"]}),Ext.define("School.model.multimedia.VideolibMgr",{extend:"Ext.data.Model",fields:["id","comment","createTime","description2","name2","tMId","photoCount2"]}),Ext.define("School.model.multimedia.VideoMgr",{extend:"Ext.data.Model",fields:["id","tMId","name","videoPath"]}),Ext.define("School.model.news.NewsMgr",{extend:"Ext.data.Model",fields:["id","createTime","title","titlephoto","type","url"]}),Ext.define("School.model.push.Contact",{extend:"Ext.data.Model",fields:[{name:"name"}],idProperty:"null"}),Ext.define("School.model.push.MsgList",{extend:"Ext.data.Model",fields:["id","content","receiversName","sendTime"]}),Ext.define("School.model.push.ParentContact",{extend:"Ext.data.Model",fields:[{name:"clazzId"},{name:"parentId"},{name:"parentName"},{name:"parentPhone"},{name:"parentSex"},{name:"parentType"},{name:"picUrl"},{name:"studentId"},{name:"studentIdCard"},{name:"studentName"},{name:"studentSex"}]}),Ext.define("School.model.push.SchoolContact",{extend:"Ext.data.Model",fields:[{name:"name"},{name:"leaf"}],idProperty:"null"}),Ext.define("School.model.push.TeacherContact",{extend:"Ext.data.Model",fields:[{name:"classId"},{name:"department"},{name:"headTeacher"},{name:"id"},{name:"lastUpdate"},{name:"name"},{name:"phone"},{name:"picUrl"},{name:"position"},{name:"sex"},{name:"studentName"},{name:"subject"}]}),Ext.define("School.model.school.ClassMgr",{extend:"Ext.data.Model",fields:["id","tScGradeId","name","sortName","comment","info","headTeacher","curriculaTeacher","curriculaTeacherId","curriculaTeacherName"]}),Ext.define("School.model.school.CourseMgr",{extend:"Ext.data.Model",fields:["id","name","comment","tScTeacherId","teacherName","trunk"]}),Ext.define("School.model.school.CurriculaMgr",{extend:"Ext.data.Model",fields:["tScSubjectId","id","name","adaptiveGrade","adaptiveTerm","comment","tScTeacherId","teacherName"]}),Ext.define("School.model.school.DepartMgr",{extend:"Ext.data.Model",fields:["id","info","name","phone","tScSchoolId","tScSubjectId","template","templateName","type","teachers"]}),Ext.define("School.model.school.ExamMgr",{extend:"Ext.data.Model",fields:["curriculaVariableId","date","id","name","teacherId","type","clazzId","clazzName","commitStatus"]}),Ext.define("School.model.school.GetOtherCurriculaMgr",{extend:"Ext.data.Model",fields:["clazzName","subjectName","teacherName","id","tScTeacherId","curriculaId"]}),Ext.define("School.model.school.GradeCombo",{extend:"Ext.data.Model",fields:["value","name"]}),Ext.define("School.model.school.GradeMgr",{extend:"Ext.data.Model",fields:["id","comment","graduate","info","level","name","sortName","gradeTeacher","year"]}),Ext.define("School.model.school.MyClass",{extend:"Ext.data.Model",fields:["parentId","emergencyPhone","parentName","parentPhone","studentAddress","studentGender","studentBirthday",{name:"studentIDCard",type:"number"},"studentId","studentName","studentPhone"]}),Ext.define("School.model.school.Position",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"name",type:"string"},{name:"comment",type:"string"}]}),Ext.define("School.model.school.ScoreMgr",{extend:"Ext.data.Model",fields:["examName","id",{name:"idCard",type:"number"},{name:"ranking",type:"number"},{name:"score",type:"number"},"studentName"]}),Ext.define("School.model.school.SelectCurricula",{}),Ext.define("School.model.school.SelectTerm",{extend:"Ext.data.Model",fields:["value","name"]}),Ext.define("School.model.school.Semester",{extend:"Ext.data.Model",fields:["currentSemester","id","name","tScSchoolId"]}),Ext.define("School.model.school.ShowSelectedCurricula",{extend:"Ext.data.Model",fields:["clazzName","curriculaId","curriculaName","id","phone","teacherName"]}),Ext.define("School.model.school.SubjectCombo",{extend:"Ext.data.Model",fields:[""]}),Ext.define("School.model.school.TeacherMgr",{extend:"Ext.data.Model",fields:["id","isAuthc","tScClassId","tScGradeId",{name:"idcard",type:"number"},"tScSchoolId","name","sex","email","birthday","education","depart","subject","course","phone","picUrl"]}),Ext.define("School.model.school.TermCombo",{extend:"Ext.data.Model",idProperty:"value",fields:["name","value"]}),Ext.define("School.model.school.Termmgr",{extend:"Ext.data.Model",fields:["id","name","startTime","endTime","week","createTime","currentSemester"]}),Ext.define("School.model.school.User",{extend:"Ext.data.Model",fields:["id","name","idcard","email","phone","picUrl","sex"]}),Ext.define("School.store.Menu",{extend:"Ext.data.Store",requires:["School.model.menu.Root"],model:"School.model.menu.Root",proxy:{type:"ajax",url:zyHost+"module/user_module_list.action",reader:{type:"json",root:"items"}},listeners:{exception:function(e,t,o){alert(o.getError()),Ext.MessageBox.show({title:"REMOTE EXCEPTION",msg:o.getError(),icon:Ext.MessageBox.ERROR,buttons:Ext.Msg.OK})}}}),Ext.define("School.store.area.AreaMgr",{extend:"Ext.data.Store",requires:["School.model.area.AreaMgr"],model:"School.model.area.AreaMgr",autoLoad:!1,listeners:{beforeload:{fn:function(e){var t={};e.setProxy(School.util.Util.setProxy("area/getSchoolAndLoginCountOfArea.action",t,"schools"))}}}}),Ext.define("School.store.area.AreaQuery",{extend:"Ext.data.Store",requires:["School.model.area.AreaQuery"],model:"School.model.area.AreaQuery",autoLoad:!1,proxy:{type:"postproxy",url:"http://baidu.com",reader:{type:"json",root:"areas"}}}),Ext.define("School.store.area.ClassLogin",{extend:"Ext.data.Store",requires:["School.model.area.ClassLogin"],model:"School.model.area.ClassLogin",listeners:{beforeload:{fn:function(e){var t={},o=Ext.ComponentQuery.query("mainpanel")[0].getActiveTab(),a=o.getItemId();console.log(a),"theclasslogin"==a?(t={classId:zy_classId},Ext.Ajax.request({url:"/school/user/getLoginCountOneClass",params:t,success:function(e){var t=JSON.parse(e.responseText);o.down("toolbar").down("label#numberOfAll").setText("班级总人数"+t.allMan),o.down("toolbar").down("label#numberOfLogin").setText("登录人数"+t.loginMan),o.down("toolbar").down("label#numberOfOffline").setText("离线人数"+t.notLoginMan)},failure:function(){School.util.Util.showErrorMsg("获取班级登录信息失败！")}})):t={classId:o.classId},e.setProxy(School.util.Util.setProxy(zyHost+"user/getUserLoginInfo.action",t,"loginInfoResult"))}}},autoLoad:!0,sorters:[{property:"IDCard",direction:"ASC"}]}),Ext.define("School.store.area.SchoolLogin",{extend:"Ext.data.Store",requires:["School.model.clazz.Getstudentmgr"],model:"School.model.clazz.Getstudentmgr",sorters:[{property:"name",direction:"ASC"}],listeners:{beforeload:{fn:function(e){var t={gradeId:Ext.ComponentQuery.query("schoollogin")[0].down("toolbar").down("combobox").getValue()};e.setProxy(School.util.Util.setProxy("clazz/getClazzByGradeId.action",t,"clazzs",100))}}},autoLoad:!1}),Ext.define("School.store.area.SchoolMgr",{extend:"Ext.data.Store",requires:["School.model.area.SchoolMgr"],model:"School.model.area.SchoolMgr",sorters:[{property:"name",direction:"ASC"}],proxy:{type:"ajax",url:zyHost+"sch/getAllSchool.action",reader:{type:"json",root:"schools"}}}),Ext.define("School.store.area.TeacherLastLogin",{extend:"Ext.data.Store",requires:["School.model.area.TeacherLastLogin"],model:"School.model.area.TeacherLastLogin",listeners:{beforeload:{fn:function(e){var t={},o=Ext.ComponentQuery.query("mainpanel")[0].getActiveTab(),a=o.getItemId();t="teacherlogin"==a?{schoolId:zy_schoolId}:{schoolId:o.schoolId},e.setProxy(School.util.Util.setProxy("/school/teacher/getAllteacherAndTime",t,"teachers"))}}},autoLoad:!0}),Ext.define("School.store.area.VisitorVolumn",{extend:"Ext.data.Store",requires:["School.model.area.VisitorVolumn"],model:"School.model.area.VisitorVolumn",data:[{name:"课程表",count:87},{name:"教师端学生健康",count:83},{name:"视频库",count:79},{name:"班级时光相册",count:72},{name:"家长端学生成绩",count:178},{name:"独立用户数",count:152},{name:"我的短信",count:0},{name:"校园公告",count:43},{name:"家长圈",count:106},{name:"教师端学生评价",count:104},{name:"校园相册",count:33},{name:"教师端学生成绩",count:74},{name:"家长端学生健康",count:32},{name:"教育热讯",count:19},{name:"荣誉之窗",count:59},{name:"家园桥",count:5},{name:"教子学园",count:50}]}),Ext.define("School.store.auth.ArrangeModule",{extend:"Ext.data.Store",requires:["School.model.auth.ArrangeModule"],model:"School.model.auth.ArrangeModule",proxy:{type:"ajax",url:"/school/module/role_module_list.action",reader:{type:"json",root:"modules"}},autoLoad:!1}),Ext.define("School.store.auth.ArrangeRole",{extend:"Ext.data.Store",requires:["School.model.auth.ArrangeRole"],model:"School.model.auth.ArrangeRole",proxy:{type:"ajax",url:"/school/role/user_role_list.action",reader:{type:"json",root:"user_roles"}},autoLoad:!1}),Ext.define("School.store.auth.BtnPermission",{extend:"Ext.data.Store",requires:["School.model.auth.BtnPermission"],model:"School.model.auth.BtnPermission",proxy:{type:"ajax",url:"/school/permission/permission_list_by_role_module_id.action",reader:{type:"json",root:"permissions"}},autoLoad:!1}),Ext.define("School.store.auth.Module",{extend:"Ext.data.Store",requires:["School.model.auth.Module"],model:"School.model.auth.Module",autoLoad:!1,proxy:{type:"ajax",url:"/school/module/module_list.action",reader:{type:"json",root:"items"}}}),Ext.define("School.store.auth.ModuleTree",{extend:"Ext.data.TreeStore",requires:["School.model.auth.Module"],model:"School.model.auth.Module",autoLoad:!1,proxy:{type:"ajax",url:"/school/module/module_list.action",reader:{type:"json",root:"items"}}}),Ext.define("School.store.auth.Role",{extend:"Ext.data.Store",requires:["School.model.auth.Role"],model:"School.model.auth.Role",autoLoad:!1,proxy:{type:"ajax",url:"/school/role/role_list.action",reader:{type:"json",root:"roles"}}}),Ext.define("School.store.auth.User",{extend:"Ext.data.Store",requires:["School.model.auth.User"],model:"School.model.auth.User",proxy:{type:"ajax",url:"data/auth/user.json",reader:{type:"json",root:"data"}}}),Ext.define("School.store.clazz.Appraise",{extend:"Ext.data.Store",requires:["School.model.clazz.Appraise"],model:"School.model.clazz.Appraise",proxy:{type:"ajax",url:"/school/appraise/getAppraiseByteacherForPc",actionMethods:{read:"POST"},reader:{type:"json",root:"result"}},autoLoad:!1}),Ext.define("School.store.clazz.CommentMgr",{
extend:"Ext.data.Store",requires:["School.model.clazz.CommentMgr"],model:"School.model.clazz.CommentMgr",listeners:{beforeload:{fn:function(e){var t={type:"unpass"};e.setProxy(School.util.Util.setProxy("/school/evaluation/findTemplateByType",t,"list"))}}}}),Ext.define("School.store.clazz.FileContact",{extend:"Ext.data.TreeStore",requires:["School.model.clazz.FileContact"],model:"School.model.clazz.FileContact",proxy:{type:"ajax",url:"/school/clazz/getAllClassByZTree",reader:{type:"json",root:"children"}}}),Ext.define("School.store.clazz.FileShare",{extend:"Ext.data.Store",requires:["School.model.clazz.FileShare"],model:"School.model.clazz.FileShare",listeners:{beforeload:{fn:function(e){var t={clazzId:zy_classId};e.setProxy(School.util.Util.setProxy("file/getAllFiles",t,"filelist"))}}}}),Ext.define("School.store.clazz.Getstudentmgr",{extend:"Ext.data.Store",requires:["School.model.clazz.Getstudentmgr"],model:"School.model.clazz.Getstudentmgr",sorters:[{property:"name",direction:"ASC"}],listeners:{beforeload:{fn:function(e){var t={gradeId:Ext.ComponentQuery.query("getstudentmgr")[0].down("toolbar").down("combobox").getValue()};e.setProxy(School.util.Util.setProxy("clazz/getClazzByGradeId.action",t,"clazzs",100))}}},autoLoad:!1}),Ext.define("School.store.clazz.GradeStore",{extend:"Ext.data.Store",requires:["School.model.clazz.GradeStore"],model:"School.model.clazz.GradeStore",listeners:{beforeload:{fn:function(e){var t={schoolId:zy_schoolId};e.setProxy(School.util.Util.setProxy("grade/getAllGrade.action",t,"grades",100))}}},sorters:[{property:"level",direction:"ASC"}]}),Ext.define("School.store.clazz.Health",{extend:"Ext.data.Store",storeId:"healthStore",requires:["School.model.clazz.Health"],model:"School.model.clazz.Health",proxy:{type:"ajax",url:"/school/healthy/selectByClass.action",reader:{type:"json",root:"result",totalProperty:"totalCount"}},autoLoad:!0,pageSize:20}),Ext.define("School.store.clazz.Identity",{extend:"Ext.data.Store",requires:[],fields:["name","subject","type"],listeners:{beforeload:{fn:function(e){var t={classId:zy_classId,semesterId:zy_termId};e.setProxy(School.util.Util.setProxy("appraiseSubject/getSubject.action",t,"result"))}}}}),Ext.define("School.store.clazz.PostMgr",{extend:"Ext.data.Store",requires:["School.model.clazz.PostMgr"],model:"School.model.clazz.PostMgr",autoLoad:!1,listeners:{beforeload:{fn:function(e){var t=Ext.ComponentQuery.query("myclass #myclasses")[0].getValue(),o={clazzId:t};e.setProxy(School.util.Util.setProxy("post/seePost.action",o,"posts"))}}}}),Ext.define("School.store.clazz.SelectSchoolGrade",{extend:"Ext.data.Store",requires:["School.model.clazz.SelectSchoolGrade"],model:"School.model.clazz.SelectSchoolGrade",proxy:{type:"postproxy",url:zyHost+"grade/getAllGrade.action",reader:{type:"json",totalProperty:"totalCount",root:"grades"}},sorters:[{property:"level",direction:"ASC"}],autoload:!1}),Ext.define("School.store.clazz.Subject",{extend:"Ext.data.Store",requires:["School.model.clazz.Subject"],model:"School.model.clazz.Subject",proxy:{type:"ajax",url:"/school/appraiseSubject/getSubject.action",reader:{type:"json",root:"result"}},autoLoad:!1}),Ext.define("School.store.clazz.WordTpl",{extend:"Ext.data.Store",requires:["School.model.clazz.WordTpl"],model:"School.model.clazz.WordTpl",listeners:{beforeload:{fn:function(e){var t="appraiseSubject/getAppraiseSubject.action",o="appraisewin wordtpl #type",a=Ext.ComponentQuery.query(o)[0],l=a?a.getValue().type:"resultForTeacher",i={};console.log(l),e.setProxy(School.util.Util.setProxy(t,i,l))}}}}),Ext.define("School.store.exam.GetOtherCurriculaMgr",{extend:"Ext.data.Store",requires:["School.model.school.GetOtherCurriculaMgr"],model:"School.model.school.GetOtherCurriculaMgr",proxy:{type:"postproxy",url:zyHost+"curricula/showCurriculaVariable.action",reader:{type:"json",totalProperty:"totalCount",root:"info"}},autoload:!1}),Ext.define("School.store.exam.SeeOtherGradesmgr",{extend:"Ext.data.Store",requires:["School.model.school.ExamMgr"],model:"School.model.school.ExamMgr",listeners:{beforeload:{fn:function(e){var t={semesterId:Ext.ComponentQuery.query("seeothergradesmgr")[0].down("toolbar").getComponent("termcombo").getValue(),gradeId:Ext.ComponentQuery.query("seeothergradesmgr")[0].down("toolbar").getComponent("gradecombo").getValue(),subjectId:Ext.ComponentQuery.query("seeothergradesmgr")[0].down("toolbar").getComponent("subjectcombo").getValue(),teacherId:Ext.ComponentQuery.query("seeothergradesmgr")[0].down("toolbar").getComponent("teachercombo").getValue(),type:0};e.setProxy(School.util.Util.setProxy("exam/selectExamRecord.action",t,"exams"))}}},sorters:{property:"date",direction:"DESC"}}),Ext.define("School.store.multimedia.AlbumMgr",{extend:"Ext.data.Store",sorters:[{property:"updateTime",direction:"DESC"}],requires:["School.model.multimedia.AlbumMgr"],model:"School.model.multimedia.AlbumMgr"}),Ext.define("School.store.multimedia.CheckPhoto",{extend:"Ext.data.Store",autoLoad:!0,requires:["School.model.multimedia.CheckPhoto"],model:"School.model.multimedia.CheckPhoto",storeId:"photos",autoLoad:!1,sorters:[{property:"name",direction:"DESC"}],listeners:{beforeload:{fn:function(e){var t={};e.setProxy(School.util.Util.setProxy("album/getNoPassAlbum.action",t,"photos","totalCount"))}}}}),Ext.define("School.store.multimedia.GradeResource",{extend:"Ext.data.Store",requires:["School.model.multimedia.GradeResource"],model:"School.model.multimedia.GradeResource",proxy:{type:"ajax",url:"grade_resources/getAllResoureces.action",reader:{type:"json",root:"result"}},autoLoad:!1,pageSize:15}),Ext.define("School.store.multimedia.LearningCenter",{extend:"Ext.data.Store",requires:["School.model.multimedia.LearningCenter"],model:"School.model.multimedia.LearningCenter",proxy:{type:"ajax",url:"resource_type/getAllType.action",reader:{type:"json",root:"result",totalCount:"totalCount"}},autoLoad:!1}),Ext.define("School.store.multimedia.PhotoMgr",{extend:"Ext.data.Store",requires:["School.model.multimedia.PhotoMgr"],model:"School.model.multimedia.PhotoMgr",storeId:"photos",autoLoad:!1}),Ext.define("School.store.multimedia.VideolibMgr",{extend:"Ext.data.Store",sorters:[{property:"createTime",direction:"DESC"}],requires:["School.model.multimedia.VideolibMgr"],model:"School.model.multimedia.VideolibMgr",autoLoad:!1}),Ext.define("School.store.multimedia.VideoMgr",{extend:"Ext.data.Store",autoLoad:!0,requires:["School.model.multimedia.VideoMgr"],model:"School.model.multimedia.VideoMgr",autoLoad:!1,listeners:{beforeload:{fn:function(e){var t={libraryId:zy_videolibId};e.setProxy(School.util.Util.setProxy("video/getPassVideo.action",t,"videos","totalCount"))}}}}),Ext.define("School.store.news.CopyNewsSchool",{extend:"Ext.data.TreeStore",requires:["School.model.push.SchoolContact"],model:"School.model.push.SchoolContact",listeners:{beforeload:function(e){var t=Ext.ComponentQuery.query("copynews")[0].winId,o="";o="hotnewslist"==t?"sch/getSchoolOnlyByTree":"/school/sch/getAllSchoolByTree",e.setProxy(School.util.Util.setProxy(o,"","children"))}}}),Ext.define("School.store.news.NewsMgr",{extend:"Ext.data.Store",requires:["School.model.news.NewsMgr"],model:"School.model.news.NewsMgr",autoLoad:!1,listeners:{beforeload:{fn:function(e){var t={},o=Ext.ComponentQuery.query("mainpanel")[0].getActiveTab(),a=o.getItemId();t="schoolnews"==a?{schoolId:zy_schoolId,type:o.down("#newscombo").getValue()}:"classnews"==a?{gradeId:o.down("#mygrades").getValue(),type:"educate"}:{type:"teaching",schoolId:o.schoolId},e.setProxy(School.util.Util.setProxy("article/getAllArticle.action",t,"articles"))}}}}),Ext.define("School.store.push.Contact",{extend:"Ext.data.TreeStore",model:"School.model.push.Contact",proxy:{type:"memory"},root:{text:"",children:[]},reader:{type:"json"}}),Ext.define("School.store.push.MsgList",{extend:"Ext.data.Store",requires:["School.model.push.MsgList"],model:"School.model.push.MsgList",autoLoad:!0,listeners:{beforeload:{fn:function(e){var t={beginTime:"2015-01-01",endTime:Ext.util.Format.date(new Date,"Y-m-d")};e.setProxy(School.util.Util.setProxy("push/getHistoryMessage.action",t,"historyMessages",25,"total"))}}}}),Ext.define("School.store.push.ParentContact",{extend:"Ext.data.Store",requires:["School.model.push.ParentContact"],model:"School.model.push.ParentContact",proxy:{type:"ajax",url:"/school/contact/getParentContactForWeb.action",reader:{type:"json",root:""}}}),Ext.define("School.store.push.SchoolContact",{extend:"Ext.data.TreeStore",requires:["School.model.push.SchoolContact"],model:"School.model.push.SchoolContact",proxy:{type:"ajax",url:"/school/grade/getAllGradeByZtree",reader:{type:"json",root:"children"}},autoLoad:!1}),Ext.define("School.store.push.TeacherContact",{extend:"Ext.data.Store",storeId:"teachercontact",requires:[],model:"School.model.push.TeacherContact",proxy:{type:"ajax",url:"/school/contact/getTeacherContactForWeb.action",reader:{type:"json"}},autoLoad:!0}),Ext.define("School.store.school.ClassMgr",{extend:"Ext.data.Store",requires:["School.model.school.ClassMgr"],model:"School.model.school.ClassMgr",listeners:{beforeload:{fn:function(e){var t={gradeId:zy_gradeId};e.setProxy(School.util.Util.setProxy("clazz/getClazzByGradeId.action",t,"clazzs"))}}}}),Ext.define("School.store.school.CourseMgr",{extend:"Ext.data.Store",requires:["School.model.school.CourseMgr"],model:"School.model.school.CourseMgr",listeners:{beforeload:{fn:function(e){var t={schoolId:zy_schoolId};e.setProxy(School.util.Util.setProxy("subject/getAllSubject.action",t,"subjects"))}}}}),Ext.define("School.store.school.CurriculaMgr",{extend:"Ext.data.Store",requires:["School.model.school.CurriculaMgr"],model:"School.model.school.CurriculaMgr",listeners:{beforeload:{fn:function(e){var t={subjectId:zy_subjectId};e.setProxy(School.util.Util.setProxy("curricula/getCurriculaBySubjectId.action",t,"curriculas"))}}}}),Ext.define("School.store.school.DepartMgr",{extend:"Ext.data.Store",requires:["School.model.school.DepartMgr"],model:"School.model.school.DepartMgr",listeners:{beforeload:{fn:function(e){var t={schoolId:zy_schoolId};e.setProxy(School.util.Util.setProxy("department/selectDepartments.action",t,"departments"))}}}}),Ext.define("School.store.school.ExamMgr",{extend:"Ext.data.Store",requires:["School.model.school.ExamMgr"],model:"School.model.school.ExamMgr",listeners:{beforeload:{fn:function(e){var t={semesterId:Ext.ComponentQuery.query("exammgr")[0].down("toolbar").getComponent("termcombo").getValue(),teacherId:zy_teacherId,gradeId:Ext.ComponentQuery.query("exammgr")[0].down("toolbar").getComponent("gradecombo").getValue(),subjectId:Ext.ComponentQuery.query("exammgr")[0].down("toolbar").getComponent("subjectcombo").getValue()};e.setProxy(School.util.Util.setProxy("exam/selectExamRecord.action",t,"exams"))}}},sorters:{property:"date",direction:"DESC"}}),Ext.define("School.store.school.GetClassByGradeId",{extend:"Ext.data.Store",requires:["School.model.clazz.Getstudentmgr"],model:"School.model.clazz.Getstudentmgr",listeners:{beforeload:{fn:function(e){var t={gradeId:Ext.ComponentQuery.query("getothercurriculamgr")[0].down("toolbar").down("combobox#gradeselect").getValue()};e.setProxy(School.util.Util.setProxy("clazz/getClazzByGradeId.action",t,"clazzs",100))}}},autoLoad:!1}),Ext.define("School.store.school.GradeMgr",{extend:"Ext.data.Store",requires:["School.model.school.GradeMgr"],model:"School.model.school.GradeMgr",sorters:[{property:"level",direction:"ASC"}],listeners:{beforeload:{fn:function(e){var t={schoolId:zy_schoolId};e.setProxy(School.util.Util.setProxy("grade/getAllGrade.action",t,"grades"))}}}}),Ext.define("School.store.school.MyClass",{extend:"Ext.data.Store",requires:["School.model.school.MyClass"],model:"School.model.school.MyClass",sorters:[{property:"studentIDCard",direction:"ASC"}],listeners:{beforeload:{fn:function(e){var t={clazzId:zy_classId};e.setProxy(School.util.Util.setProxy("student/getStudentsByClazzId.action",t,"studentInfo","totalCount"))}}}}),Ext.define("School.store.school.ScoreMgr",{extend:"Ext.data.Store",requires:["School.model.school.ScoreMgr"],model:"School.model.school.ScoreMgr",listeners:{beforeload:{fn:function(e){var t={examId:zy_examId};e.setProxy(School.util.Util.setProxy("score/getScore.action",t,"result"))}},load:{fn:function(e,t,o,a){var l=e.proxy.reader.jsonData.average,i=e.proxy.reader.jsonData.maxScore,d=e.proxy.reader.jsonData.minScore,n=Ext.ComponentQuery.query("scoremgr")[0];n.down("label#average").setText(l),n.down("label#maxScore").setText(i),n.down("label#minScore").setText(d)}}}}),Ext.define("School.store.school.SelectCurricula",{extend:"Ext.data.Store",requires:["School.model.school.ClassMgr"],model:"School.model.school.ClassMgr",listeners:{beforeload:{fn:function(e){zy_curriculaTeacher=new Array;var t={};e.setProxy(School.util.Util.setProxy("curricula/chooseCurricula.action",t,"clazzs"))}}}}),Ext.define("School.store.school.SelectTerm",{extend:"Ext.data.Store",requires:["School.model.school.SelectTerm"],model:"School.model.school.SelectTerm",data:[{value:"上学期",name:"上学期"},{value:"下学期",name:"下学期"}]}),Ext.define("School.store.school.Semester",{extend:"Ext.data.Store",requires:["School.model.school.Semester"],model:"School.model.school.Semester",listeners:{beforeload:{fn:function(e){var t={schoolId:zy_schoolId};e.setProxy(School.util.Util.setProxy("semester/getSemesterBySchoolId.action",t,"semesters"))}}}}),Ext.define("School.store.school.ShowSelectedCurricula",{extend:"Ext.data.Store",requires:["School.model.school.ShowSelectedCurricula"],model:"School.model.school.ShowSelectedCurricula",sorters:[{property:"name",direction:"ASC"}],listeners:{beforeload:{fn:function(e){var t={teacherId:zy_teacherId,semesterId:Ext.ComponentQuery.query("showselectedcurricula")[0].down("toolbar").getComponent("termcombo").getValue(),subjectId:Ext.ComponentQuery.query("showselectedcurricula")[0].down("toolbar").getComponent("subjectcombo").getValue(),gradeId:Ext.ComponentQuery.query("showselectedcurricula")[0].down("toolbar").getComponent("gradecombo").getValue()};e.setProxy(School.util.Util.setProxy("curricula/showCurriculaVariable.action",t,"info","totalCount"))}}}}),Ext.define("School.store.school.TeacherMgr",{extend:"Ext.data.Store",requires:["School.model.school.TeacherMgr"],model:"School.model.school.TeacherMgr",pageSize:2e3,listeners:{beforeload:{fn:function(e){var t={schoolId:zy_schoolId};e.setProxy(School.util.Util.setProxy("teacher/getAllTeacher.action",t,"teachers","totalCount"))}}},sorters:[{property:"idcard"}],autoLoad:!1}),Ext.define("School.store.school.TermCombo",{extend:"Ext.data.Store",requires:["School.model.school.TermCombo"],model:"School.model.school.TermCombo",proxy:{type:"ajax",url:"data/school/termCombo.json",reader:{type:"json",root:"items"}},autoLoad:!0}),Ext.define("School.store.school.Termmgr",{extend:"Ext.data.Store",requires:["School.model.school.Termmgr"],model:"School.model.school.Termmgr",listeners:{beforeload:{fn:function(e){var t={schoolId:zy_schoolId};e.setProxy(School.util.Util.setProxy("semester/getSemesterBySchoolId.action",t,"semesters"))}}},autoLoad:!0}),Ext.define("School.store.school.position.Position",{extend:"Ext.data.Store",requires:["School.model.school.Position"],model:"School.model.school.Position",proxy:{type:"ajax",url:"/school/teacher_position/getAllPositions.action",reader:{type:"json",root:"result"}},autoLoad:!0}),Ext.define("School.store.school.position.TeacherInPosition",{extend:"Ext.data.Store",storeId:"teacherinposition",requires:["School.model.school.TeacherMgr"],model:"School.model.school.TeacherMgr",proxy:{type:"ajax",url:"/school/teacher/getTeacherByPositionId.action",reader:{type:"json",root:"teachers",totalProperty:"totalCount"}},pageSize:10,autoLoad:!1}),Ext.define("School.view.Header",{extend:"Ext.toolbar.Toolbar",alias:"widget.appheader",height:100,cls:"appheader",requires:["Ext.form.Label"]}),Ext.define("School.view.Login",{extend:"Ext.panel.Panel",requires:["School.util.Util"],alias:"widget.login",width:"100%",height:School.util.Util.getInner().height,renderTo:Ext.getBody(),html:'<iframe src="login/login.html" id="login" frameborder=0 width=100% height=100%></iframe>'}),Ext.define("School.view.MainPanel",{extend:"Ext.tab.Panel",alias:"widget.mainpanel",activeTab:0,requires:[],items:[{xtype:"panel",closable:!1,iconCls:"home",title:"首页"}]}),Ext.define("School.view.MyViewport",{extend:"Ext.container.Viewport",alias:"widget.mainviewport",requires:["Ext.layout.container.Border","School.view.Header","School.view.menu.Accordion","School.view.MainPanel"],layout:{type:"border"},items:[{xtype:"mainmenu",region:"west",collapsible:!0,width:185,style:{borderRight:"3px #abcdef solid"}},{xtype:"appheader",region:"north"},{xtype:"mainpanel",region:"center"}]}),Ext.define("School.view.User",{extend:"Ext.window.Window",requires:["Ext.draw.Text","Ext.tab.Panel","Ext.form.Panel"],layout:"fit",autoShow:!0,draggable:!1,resizable:!1,alias:"widget.user",title:"修改个人信息",items:[{xtype:"tabpanel",width:350,height:350,activeTab:0,items:[{xtype:"form",itemId:"userinfo",title:"个人信息",bodyPadding:"10 20",defaultType:"textfield",defaults:{labelWidth:"40%",msgTarget:"under",allowBlank:!1,anchor:"-20",margin:"12px 0"},items:[{fieldLabel:"id",name:"id",hidden:!0},{fieldLabel:"picUrl",name:"picUrl",hidden:!0},{fieldLabel:"姓名",allowBlank:!1,name:"name"},{fieldLabel:"email",name:"email"},{xtype:"radiogroup",fieldLabel:"性别",name:"sex",itemId:"sex",anchor:"100%",items:[{boxLabel:"男",inputValue:"男",name:"sex"},{boxLabel:"女",name:"sex",inputValue:"女"}]},{fieldLabel:"教工号",name:"idcard",disabled:!0},{fieldLabel:"电话号码",name:"phone",stripCharsRe:/[0-9]||[a-z]||[A-Z]/}],buttonAlign:"center",buttons:[{xtype:"button",itemId:"saveInfo",text:"保存",scale:"medium"}]},{xtype:"form",itemId:"userpass",title:"修改密码",bodyPadding:"30 30 10 30",fieldDefaults:{labelWidth:80,msgTarget:"under"},defaults:{anchor:"100%",inputType:"password",margin:"20 0",allowBlank:!1},defaultType:"textfield",items:[{xtype:"text",text:"你正在修改密码...",anchor:"100%",border:"0 0 1 0",margin:"0 0 20 0",padding:"0 0 10 0",style:{borderColor:"#333",borderStyle:"dashed"}},{fieldLabel:"旧密码",name:"password",allowBlank:!1},{fieldLabel:"新密码",name:"newPassword",allowBlank:!1},{fieldLabel:"确认新密码",allowBlank:!1,name:"newPasswordCfm"}],buttonAlign:"center",buttons:[{text:"确认修改",scale:"medium",itemId:"savePass",margin:"0 20"}]},{xtype:"form",title:"头像",itemId:"userpic",bodyPadding:"10, 50",defaults:{padding:"10, 0"},items:[],buttonAlign:"center",buttons:[{text:"上传",itemId:"savePic"}]}]}]}),Ext.define("School.view.area.AddSchool",{extend:"Ext.window.Window",alias:"widget.addschool",autoShow:!0,closeAction:"destroy",autoShow:!0,modal:!0,width:750,title:"注册学校",layout:"fit",items:[{xtype:"form",layout:{type:"hbox"},frame:!1,defaults:{xtype:"fieldset",margin:"10 20"},items:[{flex:10,title:"基本信息",overflowY:"auto",layout:{type:"anchor"},style:{padding:"10px"},defaults:{xtype:"textfield",labelWidth:70,anchor:"100%",msgTarget:"under",style:{marginTop:"15px"}},items:[{fieldLabel:"id",name:"id",hidden:!0},{fieldLabel:"学校名称",allowBlank:!1,afterLabelTextTpl:School.util.Util.required,name:"name",maxLength:32,emptyText:"名字最长为32"},{fieldLabel:"学校地址",name:"address"},{fieldLabel:"联系电话",name:"phone"},{fieldLabel:"邮政编码",regex:/^[0-9]{6}$/,regexText:"请输入正确的邮政编码",name:"postcode"},{fieldLabel:"电子邮箱",regex:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,regexText:"请输入正确格式的邮箱",name:"email"},{fieldLabel:"学校主页",regex:/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,regexText:"请输入正确的网址！",name:"website"},{name:"semesterName",fieldLabel:"学期名称",itemId:"semesterName",emptyText:"格式为 xxxx年秋上(春下)学期",regex:/^[0-9]{4}年(([秋][上])|([春][下]))学期$/,regexText:"格式为 xxxx年秋上(春下)学期",allowBlank:!1,msgTarget:"under",afterLabelTextTpl:School.util.Util.required},{name:"startTime",fieldLabel:"开始时间",itemId:"startTime",format:"Y-m-d",xtype:"datefield",emptyText:"格式如：2016-08-08",editable:!0,allowBlank:!1,msgTarget:"under",invalidText:"格式有误，请按2010-09-01格式填写",afterLabelTextTpl:School.util.Util.required},{name:"endTime",fieldLabel:"结束时间",itemId:"endTime",format:"Y-m-d",xtype:"datefield",emptyText:"格式如：2016-08-08",editable:!0,allowBlank:!1,msgTarget:"under",invalidText:"格式有误，请按2010-09-01格式填写",afterLabelTextTpl:School.util.Util.required},{name:"week",fieldLabel:"持续周数",itemId:"week",regex:/^[0-9]*$/,allowBlank:!1,msgTarget:"under",invalidText:"只能为数字",afterLabelTextTpl:School.util.Util.required},{xtype:"filefield",fieldLabel:"学校logo",name:"file"}]},{flex:10,title:"其他信息",itemId:"schoolOtherMessage",style:{padding:"10px"},items:[{xtype:"checkboxgroup",labelWidth:50,fieldLabel:"科目",columns:4,defaults:{margin:"15 0"},items:[{name:"subjectsName",boxLabel:"语文",inputValue:"语文"},{name:"subjectsName",boxLabel:"数学",inputValue:"数学"},{name:"subjectsName",boxLabel:"英语",inputValue:"英语"},{name:"subjectsName",boxLabel:"音乐",inputValue:"音乐"},{name:"subjectsName",boxLabel:"美术",inputValue:"美术"},{name:"subjectsName",boxLabel:"体育",inputValue:"体育"},{name:"subjectsName",boxLabel:"品德",inputValue:"品德"},{name:"subjectsName",boxLabel:"信息",inputValue:"信息"},{name:"subjectsName",boxLabel:"书法",inputValue:"书法"},{name:"subjectsName",boxLabel:"实践",inputValue:"实践"},{name:"subjectsName",boxLabel:"科学",inputValue:"科学"},{name:"subjectsName",boxLabel:"校本",inputValue:"校本"},{name:"subjectsName",boxLabel:"心理",inputValue:"心理"}]},{xtype:"checkboxgroup",labelWidth:50,fieldLabel:"年级",columns:3,defaults:{margin:"15 0"},items:[{name:"gradesName",boxLabel:"一年级",inputValue:"一年级"},{name:"gradesName",boxLabel:"二年级",inputValue:"二年级"},{name:"gradesName",boxLabel:"三年级",inputValue:"三年级"},{name:"gradesName",boxLabel:"四年级",inputValue:"四年级"},{name:"gradesName",boxLabel:"五年级",inputValue:"五年级"},{name:"gradesName",boxLabel:"六年级",inputValue:"六年级"},{name:"gradesName",boxLabel:"七年级",inputValue:"七年级"},{name:"gradesName",boxLabel:"八年级",inputValue:"八年级"},{name:"gradesName",boxLabel:"九年级",inputValue:"九年级"}]}]}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.area.AreaMgr",{extend:"Ext.grid.Panel",alias:"widget.areamgr",itemId:"areamgr",requires:["School.store.area.AreaMgr"],initComponent:function(){this.store=Ext.create("School.store.area.AreaMgr"),this.columns=[{text:"id",hidden:!0,sortable:!1,text:"学校id",dataIndex:"id"},{text:"学校名称",flex:2,dataIndex:"name"},{text:"学校地址",flex:2,dataIndex:"address"},{text:"联系电话",flex:2,dataIndex:"phone"},{xtype:"actioncolumn",flex:1,itemId:"readHotNews",header:"查看教育热讯",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",defaults:{margin:"0 20 0 0"},items:[{fieldLabel:"省",labelWidth:20,itemId:"province",xtype:"combo",triggerAction:"all",width:185,displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"},{fieldLabel:"市",labelWidth:20,itemId:"city",xtype:"combo",triggerAction:"all",width:185,displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"},{fieldLabel:"区",labelWidth:20,itemId:"town",xtype:"combo",triggerAction:"all",width:185,displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)},forceFit:!0}),Ext.define("School.view.area.ClassLogin",{extend:"Ext.grid.Panel",requires:["School.store.area.ClassLogin"],alias:"widget.classlogin",itemId:"classlogin",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.area.ClassLogin",{pageSize:100}),this.columns=[{text:"学号",dataIndex:"IDCard",flex:3},{text:"学生姓名",dataIndex:"studentName",flex:3},{text:"父母姓名",dataIndex:"parentName",flex:3},{text:"最后登陆时间",dataIndex:"lastLogin",flex:3}],this.dockedItems=[{xtype:"toolbar",dock:"top",defaults:{margin:"10 10 10 10",text:"",style:{color:"red",fontWeight:"800"},xtype:"label"},items:[{itemId:"numberOfAll"},{itemId:"numberOfLogin"},{itemId:"numberOfOffline"}]}],this.callParent(arguments)}}),Ext.define("School.view.area.Getloginmgr",{extend:"Ext.grid.Panel",alias:"widget.getloginmgr",itemId:"getloginmgr",requires:["School.store.area.AreaMgr"],initComponent:function(){this.store=Ext.create("School.store.area.AreaMgr"),this.columns=[{text:"id",hidden:!0,sortable:!1,text:"学校id",dataIndex:"id"},{text:"学校名称",flex:2,dataIndex:"name"},{text:"学校地址",flex:2,dataIndex:"address"},{text:"联系电话",flex:2,dataIndex:"phone"},{text:"家长安装率",dataIndex:"loginCountMap.loginParentPercentage",flex:2},{text:"教师安装率",dataIndex:"loginCountMap.loginTeacherPercentage",flex:2},{xtype:"actioncolumn",flex:1,itemId:"teacherLastLogin",header:"学校老师最后登录",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]},{xtype:"actioncolumn",flex:1,itemId:"readLogin",header:"查看使用情况",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",defaults:{defaults:{margin:"0 20 0 0"}},layout:"vbox",items:[{xtype:"form",layout:"hbox",items:[{fieldLabel:"省",labelWidth:20,itemId:"province",xtype:"combo",triggerAction:"all",width:185,displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"},{fieldLabel:"市",labelWidth:20,itemId:"city",xtype:"combo",triggerAction:"all",width:185,displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"},{fieldLabel:"区",labelWidth:20,itemId:"town",xtype:"combo",triggerAction:"all",width:185,displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"}]},{xtype:"form",layout:"hbox",items:[{xtype:"label",margin:"10 10 10 10",text:"",itemId:"schoolCountOfTeacher",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"loginCountOfTeacher",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"NotLoginCountOfTeacher",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"schoolCountOfParent",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"loginCountOfParent",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"NotLoginCountOfParent",style:{color:"red",fontWeight:"800"}}]}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)},forceFit:!0}),Ext.define("School.view.area.SchoolLogin",{extend:"Ext.grid.Panel",requires:["School.store.area.SchoolLogin"],alias:"widget.schoollogin",itemId:"schoollogin",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.area.SchoolLogin",{pageSize:100}),this.columns=[{text:"id",hidden:!0,dataIndex:"id"},{text:"班级",dataIndex:"name",flex:3},{text:"班主任",dataIndex:"headTeacher",flex:3},{xtype:"actioncolumn",flex:1,header:"查看",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",layout:"vbox",items:[{xtype:"form",layout:"hbox",items:[{fieldLabel:"年级选择",width:200,labelWidth:60,itemId:"gradeselect",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.clazz.SelectSchoolGrade")},{xtype:"label",margin:"2 0 0 50",text:"温馨提示：请选择年级",style:{color:"red",fontWeight:"800"}}]},{xtype:"form",layout:"hbox",items:[{xtype:"label",margin:"10 10 10 10",text:"",itemId:"schoolCountOfTeacher",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"loginCountOfTeacher",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"NotLoginCountOfTeacher",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"schoolCountOfParent",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"loginCountOfParent",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"10 10 10 10",text:"",itemId:"NotLoginCountOfParent",style:{color:"red",fontWeight:"800"}}]}]}],this.callParent(arguments)}}),Ext.define("School.view.area.SchoolMgr",{extend:"Ext.grid.Panel",alias:"widget.schoolmgr",itemId:"schoolmgr",requires:["School.store.area.SchoolMgr"],initComponent:function(){this.store=Ext.create("School.store.area.SchoolMgr"),this.columns=[{text:"id",hidden:!0,sortable:!1,dataIndex:"id"},{text:"学校名称",flex:2,dataIndex:"name"},{text:"学校地址",flex:2,dataIndex:"address"},{text:"联系电话",flex:1,dataIndex:"phone"},{text:"邮政编码",flex:1,dataIndex:"postcode"},{text:"电子邮箱",flex:1,dataIndex:"email"},{text:"学校主页",flex:1,dataIndex:"website"},{text:"学校logo",flex:1,hidden:!0,dataIndex:"logo"},{xtype:"actioncolumn",flex:1,itemId:"addManager",header:"添加管理员",permissionId:"addManager",align:"center",items:[{iconCls:"add",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]},{xtype:"actioncolumn",flex:1,itemId:"introduce",header:"查看校园简介",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{xtype:"button",text:"新增",itemId:"add",permissionId:"addSchool",iconCls:"add"},{xtype:"button",text:"编辑",itemId:"edit",permissionId:"editSchool",iconCls:"edit"},{xtype:"button",text:"删除",itemId:"delete",permissionId:"deleteSchool",iconCls:"delete"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)},forceFit:!0}),Ext.define("School.view.area.SelectSchool",{extend:"Ext.grid.Panel",alias:"widget.selectschool",selType:"checkboxmodel",itemId:"selectschool",height:300,requires:["School.store.area.AreaMgr"],initComponent:function(){this.store=Ext.create("School.store.area.AreaMgr"),this.columns=[{text:"id",hidden:!0,sortable:!1,text:"学校id",dataIndex:"id"},{flex:15,text:"学校名称",sortable:!1,dataIndex:"name"}],this.dockedItems=[{xtype:"toolbar",layout:"vbox",defaults:{margin:"0 0 10 0",width:"98%"},flex:1,dock:"top",items:[{fieldLabel:"省",labelWidth:20,itemId:"province",xtype:"combo",triggerAction:"all",displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"},{fieldLabel:"市",labelWidth:20,itemId:"city",xtype:"combo",triggerAction:"all",displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"},{fieldLabel:"区",labelWidth:20,itemId:"town",xtype:"combo",triggerAction:"all",displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.area.AreaQuery"),queryMode:"remote"}]}],this.callParent(arguments)},forceFit:!0}),Ext.define("School.view.area.TeacherLastLogin",{extend:"Ext.grid.Panel",requires:["School.store.area.TeacherLastLogin"],alias:"widget.teacherlastlogin",itemId:"teacherlastlogin",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.area.TeacherLastLogin"),this.columns=[{text:"姓名",dataIndex:"name",flex:3},{text:"手机号码",dataIndex:"phone",flex:3},{text:"邮箱",dataIndex:"email",flex:3},{text:"最后一次登录时间",dataIndex:"loginStatus",flex:3}],this.callParent(arguments)}}),Ext.define("School.view.area.VisitorVolumn",{extend:"Ext.grid.Panel",alias:"widget.visitorvolumn",itemId:"visitorvolumn",requires:["School.store.area.VisitorVolumn"],initComponent:function(){this.store=Ext.create("School.store.area.VisitorVolumn",{autoLoad:!0}),this.columns=[{text:"模块名称",dataIndex:"name"},{text:"访问数量",dataIndex:"count"}],this.dockedItems=[{xtype:"toolbar",dock:"top",defaults:{labelWidth:20},items:[{xtype:"label",text:"时间范围:",margin:"0 10"},{xtype:"datefield",format:"Y-m-d",emptyText:"日期格式：xxxx-xx-xx",fieldLabel:"从",
itemId:"beginTime"},{xtype:"datefield",format:"Y-m-d",emptyText:"日期格式：xxxx-xx-xx",fieldLabel:"到",itemId:"endTime"},{xtype:"button",iconCls:"key_go",text:"查询",itemId:"query"}]}],this.callParent(arguments)},forceFit:!0}),Ext.define("School.view.auth.CapsLockTooltip",{extend:"Ext.tip.QuickTip",alias:"widget.capslocktooltip",target:"password",anchor:"top",anchorOffset:60,width:300,dismissDelay:0,autoHide:!1,title:' <div class="capslock"> 大写键已锁定</div> ',html:"<div>大写键已经锁定,可能会影响您输入正确的密码！</div>"}),Ext.define("School.view.auth.Profile",{extend:"Ext.window.Window",alias:"widget.profile",title:"用户信息",height:320,width:550,modal:!0,requires:["School.util.Util","Ext.form.FieldSet","Ext.form.field.Hidden","Ext.form.field.File"],layout:{align:"stretch",type:"vbox"},initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"form",bodyPadding:5,layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",flex:2,title:"基本信息",defaults:{afterLabelTextTpl:School.util.Util.required,anchor:"100%",margin:"10 0",xtype:"textfield",allowBlank:!1,labelWidth:80},items:[{xtype:"hiddenfield",fieldLabel:"Label",name:"id"},{fieldLabel:"用户名",name:"username"},{fieldLabel:"真实姓名",maxLength:100,name:"realName"},{fieldLabel:"电子邮箱",maxLength:100,name:"email"},{xtype:"filefield",fieldLabel:"头像",buttonText:"选择文件",name:"picture",allowBlank:!0,afterLabelTextTpl:""}]},{xtype:"fieldset",title:"头像",width:170,items:[{xtype:"image",height:150,width:150,src:"resources/images/avantar.png"}]}]}],dockedItems:[{xtype:"toolbar",flex:1,dock:"bottom",ui:"footer",layout:{pack:"end",type:"hbox"},items:[{xtype:"button",text:"取消",itemId:"undo",glyph:61666},{xtype:"button",text:"提交",itemId:"save",glyph:61452}]}]}),e.callParent(arguments)}}),Ext.define("School.view.auth.UserMgr",{extend:"Ext.grid.Panel",alias:"widget.usermgr",title:"用户管理",requires:["Ext.toolbar.Toolbar","Ext.form.Panel","School.store.auth.User"],initComponent:function(){var e=this;e.store=Ext.create("School.store.auth.User"),Ext.apply(e,{dockedItems:[{xtype:"toolbar",dock:"top",defaults:{iconAlign:"left"},items:[{text:"添加用户",itemId:"add",glyph:62004},{text:"修改用户",itemId:"edit",glyph:61680},{text:"删除用户",itemId:"remove",glyph:62005},{xtype:"form",layout:"hbox",defaults:{margin:"0 10"},items:[{xtype:"textfield",labelWidth:60,fieldLabel:"用户名称"},{xtype:"button",width:100,text:"查询"},{xtype:"button",width:100,text:"重置"}]}]},{xtype:"pagingtoolbar",store:e.store,dock:"bottom",displayInfo:!0}],columns:[{text:"用户名称",dataIndex:"username"},{text:"真实姓名",dataIndex:"realName"},{text:"创建时间",dataIndex:"createTime"},{text:"激活状态",dataIndex:"active"},{text:"所属角色",dataIndex:"role"},{text:"所属部门",dataIndex:"department"}]}),e.callParent(arguments)}}),Ext.define("School.view.clazz.FileShare",{extend:"Ext.panel.Panel",alias:"widget.fileshare",itemId:"fileshare",layout:"border",initComponent:function(){var e=this;Ext.apply(e,{items:[{region:"east",xtype:"treepanel",title:"选择文件共享人",itemId:"fileContact",rootVisible:!1,displayField:"name",width:300,overflowY:"auto",frame:!0,store:Ext.create("School.store.clazz.FileContact")},{region:"center",xtype:"gridpanel",forceFit:!0,itemId:"filegrid",store:Ext.create("School.store.clazz.FileShare"),columns:[{text:"id",hidden:!0,text:"文件id",dataIndex:"id"},{text:"文件名",dataIndex:"name",flex:4},{text:"上传者",dataIndex:"uploader",flex:4},{text:"上传时间",dataIndex:"uploadTime",flex:4},{text:"文件大小",dataIndex:"size",flex:4},{text:"文件类型",dataIndex:"type",flex:4},{text:"下载",dataIndex:"filePath",flex:4,renderer:function(e,t){return console.log("localhost:8080"+zyHost+e),"<a href=localhost:8080"+zyHost+e+" download="+t.record.data.name+">"+t.record.data.name+"</a>"}},{xtype:"actioncolumn",header:"删除",align:"center",flex:4,itemId:"delete",items:[{iconCls:"delete",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],dockedItems:[{xtype:"toolbar",flex:2,dock:"top",items:[{xtype:"button",text:"上传文件",itemId:"upload",iconCls:"upload"},{xtype:"button",text:"修改文件",itemId:"edit",iconCls:"edit"},{fieldLabel:"我的班级",width:200,labelWidth:60,itemId:"myclasses",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:zy_classes,queryMode:"local"}]}]}]}),e.callParent(arguments)}}),Ext.define("School.view.clazz.FileShareEditWin",{extend:"Ext.window.Window",alias:"widget.fileshareeditwin",itemId:"fileshareeditwin",title:"编辑文件",closeAction:"destroy",modal:!0,initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:"anchor",defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,marginTop:"20px",msgTarget:"under"},items:[{name:"name",fieldLabel:"文件名",allowBlank:!1,blankText:"不能为空"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),e.callParent(arguments)}}),Ext.define("School.view.clazz.Getstudentmgr",{extend:"Ext.grid.Panel",requires:["School.store.clazz.Getstudentmgr"],alias:"widget.getstudentmgr",itemId:"getstudentmgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.clazz.Getstudentmgr",{pageSize:100}),this.columns=[{text:"id",hidden:!0,dataIndex:"id"},{text:"班级",dataIndex:"name",flex:3},{text:"班主任",dataIndex:"headTeacher",flex:3},{xtype:"actioncolumn",flex:1,header:"查看",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"年级选择",width:200,labelWidth:60,itemId:"gradeselect",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.clazz.GradeStore")},{xtype:"label",margin:"0 0 0 50",text:"温馨提示：请选择年级",style:{color:"red",fontWeight:"800"}}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.clazz.PostMgr",{extend:"Ext.grid.Panel",requires:["School.store.clazz.PostMgr"],alias:"widget.postmgr",itemId:"postmgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.clazz.PostMgr"),this.columns=[{text:"帖子id",hidden:!0,dataIndex:"id"},{text:"班级id",hidden:!0,dataIndex:"tMId"},{text:"图片地址",hidden:!0,dataIndex:"urls",renderer:function(e){return e.join(",")}},{text:"标题",flex:3,dataIndex:"title",renderer:function(e){return e||"无"}},{text:"帖子内容",flex:5,dataIndex:"context"},{text:"发帖人",flex:3,dataIndex:"publisherName"},{text:"发帖时间",flex:3,dataIndex:"createTime"},{text:"点赞数",flex:1,dataIndex:"praisesCount"},{text:"评论数",flex:1,dataIndex:"repliesCount"},{xtype:"actioncolumn",itemId:"viewpost",flex:1,header:"详情",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]},{xtype:"actioncolumn",flex:1,itemId:"deletepost",header:"删除",permissionId:"deleteStudent",align:"center",items:[{iconCls:"delete",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.callParent(arguments)}}),Ext.define("School.view.clazz.ViewPost",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.viewpost",closable:!0,resizable:!1,draggable:!1,modal:!0,autoShow:!0,layout:{type:"fit",align:"stretch"},width:320,height:580,title:"帖子详情",items:[{xtype:"panel",html:'<iframe src="viewpost.html" id="postWin" frameborder=0 width=100% height=100%></iframe>'}]}),Ext.define("School.view.exam.AddExam",{extend:"Ext.window.Window",requires:["Ext.form.field.Time"],closeAction:"destroy",alias:"widget.addexam",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"创建考试",items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,msgTarget:"under",style:{marginTop:"20px"}},items:[{name:"name",fieldLabel:"考试名称",maxLength:16},{fieldLabel:"学期",name:"semesterId",itemId:"termcombo",xtype:"combobox",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.Semester"),queryMode:"remote"},{name:"date",flex:1,xtype:"datefield",editable:!1,format:"Y-m-d",fieldLabel:"考试日期"},{name:"type",hidden:!0,value:"1"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.exam.EditExam",{extend:"Ext.window.Window",requires:["Ext.form.field.Time"],closeAction:"destroy",alias:"widget.editexam",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"创建考试",items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,style:{marginTop:"20px"}},items:[{name:"id",hidden:!0,fieldLabel:"班级考试",allowBlank:!0},{name:"name",fieldLabel:"考试名称"},{name:"date",flex:1,xtype:"datefield",editable:!1,format:"Y-m-d",fieldLabel:"考试日期"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.exam.ExamMgr",{extend:"Ext.grid.Panel",requires:["School.store.school.ExamMgr"],itemId:"exammgr",alias:"widget.exammgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.ExamMgr",{pageSize:10,autoLoad:!1}),this.columns=[{text:"开课id",hidden:!0,dataIndex:"curriculaVariableId"},{text:"考试id",hidden:!0,dataIndex:"id"},{text:"班级id",hidden:!0,dataIndex:"clazzId"},{text:"考试名称",dataIndex:"name"},{text:"班级",dataIndex:"clazzName"},{text:"考试类型",dataIndex:"type",renderer:function(e){switch(e){case 0:return"单元测试";default:return"期末考试"}},hidden:!0},{text:"考试时间",dataIndex:"date"},{text:"提交情况",dataIndex:"type",renderer:function(e){switch(e){case 1:return"<font color='red'>未提交</font>";default:return"<font color='green'>已提交</font>"}}},{xtype:"actioncolumn",header:"查看成绩",permissionId:"seeExamScore",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"学科选择",labelWidth:60,itemId:"subjectcombo",xtype:"combo",triggerAction:"all",width:150,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.CourseMgr"),queryMode:"remote"},{fieldLabel:"年级选择",labelWidth:60,itemId:"gradecombo",xtype:"combo",triggerAction:"all",width:150,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.GradeMgr"),queryMode:"remote"},{fieldLabel:"学期选择",labelWidth:60,itemId:"termcombo",xtype:"combobox",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.Semester"),queryMode:"remote"},{xtype:"button",iconCls:"cancel",text:"重置",itemId:"resetcombo"},{xtype:"tbseparator"},{xtype:"button",text:"修改",iconCls:"edit",permissionId:"editExam",itemId:"edit"},{xtype:"button",iconCls:"delete",text:"删除",permissionId:"deleteExam",itemId:"delete"},{xtype:"tbseparator"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.exam.GetOtherCurriculaMgr",{extend:"Ext.grid.Panel",requires:["School.store.exam.GetOtherCurriculaMgr"],alias:"widget.getothercurriculamgr",itemId:"getothercurriculamgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.exam.GetOtherCurriculaMgr",{pageSize:100}),this.columns=[{text:"id",dataIndex:"id",hidden:!0,flex:3},{text:"teacherId",dataIndex:"tScTeacherId",hidden:!0,flex:3},{text:"curriculaId",dataIndex:"curriculaId",hidden:!0,flex:3},{text:"班级",dataIndex:"clazzName",flex:3},{text:"科目",dataIndex:"subjectName",flex:3},{text:"任课老师",dataIndex:"teacherName",flex:3},{xtype:"actioncolumn",flex:3,header:"修改任课老师",itemId:"editTeacher",align:"center",items:[{iconCls:"edit",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"年级选择",width:200,labelWidth:60,itemId:"gradeselect",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.clazz.GradeStore")},{fieldLabel:"班级选择",width:200,labelWidth:60,itemId:"classselect",xtype:"combobox",triggerAction:"all",emptyText:"请先选择年级...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.GetClassByGradeId")},{fieldLabel:"学期选择",labelWidth:60,itemId:"termcombo",xtype:"combobox",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.Semester"),queryMode:"remote"},{xtype:"button",text:"查询",margin:"0 0 0 10",itemId:"search",width:80,iconCls:"key_go"}]}],this.callParent(arguments)}}),Ext.define("School.view.exam.ScoreMgr",{extend:"Ext.grid.Panel",requires:["School.store.school.ScoreMgr"],alias:"widget.scoremgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.ScoreMgr"),this.columns=[{text:"考试id",hidden:!0,dataIndex:"id"},{text:"学号",dataIndex:"idCard"},{text:"姓名",dataIndex:"studentName"},{text:"考试名称",dataIndex:"examName"},{text:"成绩",dataIndex:"score"},{text:"排名",dataIndex:"ranking"}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{xtype:"button",iconCls:"upload",text:"导入成绩",itemId:"uploadScore"},{xtype:"button",text:"导出成绩 / 模板",iconCls:"download",itemId:"downloadScore"},{xtype:"button",iconCls:"delete",text:"删除成绩",itemId:"delete"},{xtype:"button",iconCls:"key",text:"提交成绩",itemId:"submitExam"},{xtype:"label",margin:"0 0 0 60",text:"当前考试："},{xtype:"label",itemId:"examName",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"0 0 0 60",text:"平均分："},{xtype:"label",itemId:"average",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"0 0 0 60",text:"最高分："},{xtype:"label",itemId:"maxScore",style:{color:"red",fontWeight:"800"}},{xtype:"label",margin:"0 0 0 60",text:"最低分："},{xtype:"label",itemId:"minScore",style:{color:"red",fontWeight:"800"}}]}],this.callParent(arguments)}}),Ext.define("School.view.exam.SeeOtherGradesmgr",{extend:"Ext.grid.Panel",requires:["School.store.exam.SeeOtherGradesmgr"],itemId:"seeothergradesmgr",alias:"widget.seeothergradesmgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.exam.SeeOtherGradesmgr",{pageSize:10,autoLoad:!1}),this.columns=[{text:"开课id",hidden:!0,dataIndex:"curriculaVariableId"},{text:"考试id",hidden:!0,dataIndex:"id"},{text:"班级id",hidden:!0,dataIndex:"clazzId"},{text:"考试名称",dataIndex:"name"},{text:"班级",dataIndex:"clazzName"},{text:"考试类型",dataIndex:"type",renderer:function(e){switch(e){case 0:return"单元测试";default:return"期末考试"}},hidden:!0},{text:"考试时间",dataIndex:"date"},{xtype:"actioncolumn",header:"查看成绩",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"学科选择",labelWidth:60,itemId:"subjectcombo",xtype:"combo",triggerAction:"all",width:150,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.CourseMgr"),queryMode:"remote"},{fieldLabel:"年级选择",labelWidth:60,itemId:"gradecombo",xtype:"combo",triggerAction:"all",width:150,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.GradeMgr"),queryMode:"remote"},{fieldLabel:"学期选择",labelWidth:60,itemId:"termcombo",xtype:"combobox",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.Semester"),queryMode:"remote"},{fieldLabel:"任课老师",itemId:"teachercombo",width:200,labelWidth:60,xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!0,displayField:"name",valueField:"id",store:Ext.create("School.store.school.TeacherMgr"),queryMode:"remote"},{xtype:"button",iconCls:"cancel",text:"重置",itemId:"resetcombo"},{xtype:"button",iconCls:"delete",text:"删除",itemId:"delete"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.exam.UploadScore",{extend:"Ext.window.Window",title:"上传成绩",closeAction:"destroy",alias:"widget.uploadscore",modal:!0,layout:{type:"fit"},width:350,items:[{xtype:"form",defaults:{width:300,labelWidth:70,margin:10},items:[{xtype:"filefield",name:"file",allowBlank:!1,fieldLabel:"文件选择",buttonText:"浏览文件"}],buttons:[{text:"上传",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.menu.Accordion",{extend:"Ext.panel.Panel",alias:"widget.mainmenu",requires:["Ext.layout.container.Accordion"],width:300,layout:{type:"accordion",pack:"start"},multi:!0,collapsible:!1,hideCollapseTool:!1,iconCls:"sitemap",title:"菜单"}),Ext.define("School.view.menu.Item",{extend:"Ext.tree.Panel",alias:"widget.mainmenuitem",border:0,rootVisible:!1}),Ext.define("School.view.multimedia.AddAlbum",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addalbum",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"创建相册",autoShow:!0,items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",msgTarget:"under",allowBlank:!1,style:{marginTop:"20px"}},items:[{name:"schoolId",hidden:!0,fieldLabel:"学校id",allowBlank:!0},{name:"clazzId",hidden:!0,fieldLabel:"班级id",allowBlank:!0},{name:"name",fieldLabel:"相册名称",emptyText:"相册名称不可大于25个字符",maxLength:25},{name:"comment",allowBlank:!0,afterLabelTextTpl:"",fieldLabel:"相册备注",maxLength:64},{name:"description",allowBlank:!0,afterLabelTextTpl:"",fieldLabel:"相册描述",maxLength:150}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.multimedia.AddVideolib",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addvideolib",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"创建视频库",autoShow:!0,items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:80,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,msgTarget:"under",style:{marginTop:"20px"}},items:[{name:"schoolId",hidden:!0,fieldLabel:"学校id",allowBlank:!0},{name:"clazzId",hidden:!0,fieldLabel:"班级id",allowBlank:!0},{name:"name2",fieldLabel:"视频库名称",maxLength:25},{name:"description2",allowBlank:!0,afterLabelTextTpl:"",fieldLabel:"视频库描述",maxLength:32},{name:"comment",allowBlank:!0,afterLabelTextTpl:"",fieldLabel:"备注",xtype:"textarea",maxLength:"64"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.multimedia.AlbumMgr",{extend:"Ext.grid.Panel",requires:["School.store.multimedia.AlbumMgr"],alias:"widget.albummgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.multimedia.AlbumMgr",{pageSize:12}),this.columns=[{text:"相册id",sortable:!1,align:"center",hidden:!0,dataIndex:"id"},{text:"相册名称",sortable:!1,dataIndex:"name"},{text:"更新时间",sortable:!0,dataIndex:"updateTime"},{text:"相片张数",sortable:!1,dataIndex:"photoCount2"},{xtype:"actioncolumn",header:"打开相册",itemId:"openAlbum",permissionId:"openAlbum",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"我的班级",width:200,labelWidth:60,itemId:"myclasses",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:zy_classes,queryMode:"local"},{xtype:"button",iconCls:"add",permissionId:"addAlbum",itemId:"addAlbum",text:"创建相册"},{xtype:"button",iconCls:"delete",permissionId:"deleteAlbum",itemId:"deleteAlbum",text:"删除相册"},{xtype:"button",iconCls:"edit",permissionId:"",itemId:"editAlbum",text:"编辑相册"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.multimedia.CheckPhoto",{alias:"widget.checkphoto",extend:"Ext.panel.Panel",id:"checkphoto",layout:{type:"fit"},initComponent:function(){this.store=Ext.create("School.store.multimedia.CheckPhoto",{pageSize:12}),this.items=[{xtype:"dataview",align:"center",store:this.store,autoScroll:!0,itemSelector:"div.nopass-photolist",style:{paddingLeft:"50px"},tpl:['<tpl for=".">','<div class="nopass-photolist">','<img width="160" heigth="160" id="{id}" src="{videoPath}" title="双击放大" class="nopass-photo"/><br />','<p class="ellipsis">{name}</p>',"</div>","</tpl>",'<div class="x-clear"></div>']}],this.dockedItems=[{xtype:"toolbar",dock:"top",items:[{fieldLabel:"我的班级",width:200,labelWidth:60,itemId:"myclasses",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:zy_classes,queryMode:"local"},{xtype:"label",margin:"0 5 0 30",text:"你已选择"},{xtype:"label",style:{color:"blue"},itemId:"photonum",text:"0"},{xtype:"label",text:"张照片"},{xtype:"checkbox",fieldLabel:"全选",labelWidth:35,margin:"0 30 0 0",width:50,itemId:"selectAll"},{xtype:"button",itemId:"pass",iconCls:"accept",permissionId:"acceptPhoto",text:"通过审核"},{xtype:"button",itemId:"deletePhoto",permissionId:"deletePhoto",iconCls:"delete",text:"删除照片"},{xtype:"button",itemId:"editPhoto",permissionId:"editPhoto",iconCls:"edit",text:"修改照片信息"}]},{xtype:"pagingtoolbar",store:this.store,dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.multimedia.EditPhoto",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.editphoto",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"修改照片信息",items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,labelSeparator:":"},items:[{itemId:"photoName",margin:"30 0 30 0",fieldLabel:"照片名称"}],buttons:[{text:"保存",width:"100%",itemId:"save"}]}]}),Ext.define("School.view.multimedia.LearningCenter",{extend:"Ext.grid.Panel",alias:"widget.learningcenter",itemId:"learningcenter",initComponent:function(){this.store=Ext.create("School.store.multimedia.GradeResource"),this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{iconCls:"add",itemId:"addRes",permissionId:"addResource",text:"新增资源"},{iconCls:"delete",itemId:"deleteRes",permissionId:"deleteResource",text:"删除资源"},"-",{xtype:"combobox",fieldLabel:"资源类型",emptyText:"请选择...",itemId:"resourcesType",editable:!1,labelWidth:60,store:Ext.create("School.store.multimedia.LearningCenter"),valueField:"id",displayField:"name",queryMode:"remote"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.columns=[{text:"年级id",hidden:!0,dataIndex:"gradeId"},{text:"资源id",hidden:!0,dataIndex:"id"},{text:"资源名称",align:"center",width:190,dataIndex:"name"},{text:"资源类型",align:"center",width:150,dataIndex:"typeName"},{text:"上传时间",align:"center",width:190,dataIndex:"uploadTime"},{text:"操作",align:"center",dataIndex:"isLink",permissionId:"doResource",renderer:function(e){return"true"==e?"<span>查看</span>":"<span>下载</span>"}}],this.callParent(arguments)}}),Ext.define("School.view.multimedia.PassCheck",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.passcheck",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"相册选择",items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:90,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,style:{marginTop:"20px"}},items:[{fieldLabel:"保存到该相册",margin:"0 0 20 0",itemId:"selectAlbum",name:"tMId",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.multimedia.AlbumMgr",{autoLoad:!1,proxy:{type:"postproxy",url:zyHost+"album/getAlbumNoPager.action",reader:{type:"json",totalProperty:"totalCount",root:"albums"}}}),queryMode:"remote"}],buttons:[{text:"保存",itemId:"save",width:"100%"}]}]}),Ext.define("School.view.multimedia.PhotoMgr",{alias:"widget.photomgr",extend:"Ext.panel.Panel",layout:{type:"fit"},initComponent:function(){this.store=Ext.create("School.store.multimedia.PhotoMgr",{pageSize:12}),this.items=[{xtype:"dataview",align:"center",store:this.store,autoScroll:!0,itemSelector:"div.passed-photolist",style:{paddingLeft:"50px",borderTop:"2px solid #ccc"},tpl:['<ul class="images">','<tpl for=".">','<li class="passed-photolist">','<img width="160" height="160" id="{id}" src="{videoPath}" name="{name}" description="{description}" sort="{sort}" title="双击放大" class="passed-photo"/><br />','<p style="word-break:break-all;height="100" text-align:left" width="160"> {description}</p>',"</li>","</tpl>","</ul>",'<div class="x-clear"></div>']}],this.dockedItems=[{xtype:"toolbar",dock:"top",defaults:{margin:"10 10 5 10"},items:[{xtype:"button",itemId:"uploadPhoto",permissionId:"uploadPhoto",iconCls:"upload",text:"上传照片"},{xtype:"button",itemId:"deletePhoto",permissionId:"deletePhoto",iconCls:"delete",text:"删除照片"},{xtype:"button",itemId:"editPhoto",iconCls:"edit",text:"编辑照片",permissionId:"updatePhoto"},{xtype:"label",text:"当前相册："},{xtype:"label",itemId:"albumName",style:{color:"red",fontWeight:"800"}}]},{xtype:"pagingtoolbar",store:this.store,dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.multimedia.PlayVideoWin",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.playvideowin",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},style:{backgroundColor:"black"},width:620,height:480,title:"播放视频",autoShow:!0,html:'<iframe src="./CuPlayer/index.html" id="palyVideoPage" frameborder=0 width=100% height=100%></iframe>'}),Ext.define("School.view.multimedia.UploadMultiPhotos",{extend:"Ext.window.Window",itemId:"uploadmultiphotos",title:"上传照片",closeAction:"destroy",alias:"widget.uploadmultiphotos",resizable:!1,draggable:!1,autoShow:!0,modal:!0,width:500,height:400,html:'<iframe src="fileUpload/index.html" id="fileUpload"  frameborder=0 width=100% height=100%></iframe>'}),Ext.define("School.view.multimedia.UploadPhoto",{extend:"Ext.window.Window",title:"上传照片",closeAction:"destroy",alias:"widget.uploadphoto",modal:!0,layout:{type:"fit"},width:350,items:[{xtype:"form",defaults:{width:300,labelWidth:70,margin:10},items:[{xtype:"textfield",name:"name",allowBlank:!0,fieldLabel:"照片名称"},{xtype:"filefield",name:"files",allowBlank:!1,fieldLabel:"照片选择",buttonText:"浏览照片"}],buttons:[{text:"上传",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.multimedia.UploadResources",{extend:"Ext.window.Window",alias:"widget.uploadresources",itemId:"uploadresources",width:450,height:250,autoShow:!0,modal:!0,buttons:[{text:"上传",itemId:"upload"}],layout:"fit",initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"form",layout:"border",items:[{xtype:"form",region:"north",layout:{type:"hbox",align:"stretch"},defaults:{padding:10,anchor:"0",labelWidth:65,flex:1,msgTarget:"side"},items:[{xtype:"combobox",fieldLabel:"选择年级",emptyText:"请选择...",editable:!1,labelWidth:65,store:Ext.create("School.store.school.GradeMgr"),valueField:"id",displayField:"name",queryMode:"remote",name:"gradeId",allowBlank:!1,afterLabelTextTpl:'<span style="color:red">*</span>'},{xtype:"combobox",fieldLabel:"资源类型",emptyText:"请选择...",editable:!1,labelWidth:65,store:Ext.create("School.store.multimedia.LearningCenter"),valueField:"id",displayField:"name",queryMode:"remote",name:"typeId",allowBlank:!1,afterLabelTextTpl:'<span style="color:red">*</span>'}]},{region:"center",xtype:"form",defaults:{padding:10,anchor:"0",labelWidth:65},items:[{xtype:"textfield",fieldLabel:"资源名称",name:"name",allowBlank:!1,afterLabelTextTpl:'<span style="color:red">*</span>',maxLength:127},{xtype:"radiogroup",fieldLabel:"资源分类",columns:2,vertical:!0,items:[{boxLabel:"站内文件",name:"isLink",itemId:"file",inputValue:!1,checked:!0},{boxLabel:"站外链接",itemId:"link",name:"isLink",inputValue:!0}]},{xtype:"filefield",filedLabel:"资源文件",buttonText:"选择文件",name:"file"},{xtype:"textfield",fieldLabel:"资源路径",name:"resourcepath",hidden:!0,maxLength:255}]}]}]}),e.callParent(arguments)}}),Ext.define("School.view.multimedia.UploadVideo",{extend:"Ext.window.Window",title:"上传视频",closeAction:"destroy",alias:"widget.uploadvideo",modal:!0,layout:{type:"fit"},width:350,items:[{xtype:"form",defaults:{width:300,labelWidth:70,margin:10},items:[{xtype:"textfield",name:"name",allowBlank:!0,fieldLabel:"视频名称"},{xtype:"filefield",name:"file",editable:!1,allowBlank:!1,afterLabelTextTpl:'<span style="color:red">*</span>',fieldLabel:"视频选择",buttonText:"浏览视频"}],buttons:[{text:"上传",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.multimedia.VideolibMgr",{extend:"Ext.grid.Panel",requires:["School.store.multimedia.VideolibMgr"],alias:"widget.videolibmgr",itemId:"videolibMgr",forceFit:!0,initComponent:function(){var e=Ext.create("School.store.multimedia.VideolibMgr");this.store=e,this.columns=[{text:"视频库id",align:"center",sortable:!1,hidden:!0,dataIndex:"id"},{text:"什么id？",align:"center",sortable:!1,hidden:!0,dataIndex:"tMId"},{text:"视频库名称",sortable:!1,dataIndex:"name2"},{text:"创建时间",dataIndex:"createTime"},{text:"视频数量",sortable:!1,dataIndex:"photoCount2"},{text:"描述",sortable:!1,dataIndex:"description2"},{text:"备注",sortable:!1,dataIndex:"comment"},{xtype:"actioncolumn",sortable:!1,header:"打开视频库",permissionId:"openVideoLib",itemId:"openVideolib",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"我的班级",width:200,labelWidth:60,itemId:"myclasses",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:zy_classes,queryMode:"local"},{xtype:"button",iconCls:"add",itemId:"addLib",permissionId:"addVideoLib",text:"创建视频库"},{xtype:"button",iconCls:"edit",itemId:"editLib",permissionId:"editVideoLib",text:"修改视频库"},{xtype:"button",iconCls:"delete",itemId:"deleteLib",permissionId:"deleteVideoLib",text:"删除视频库"}]},{xtype:"pagingtoolbar",store:e,dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.multimedia.VideoMgr",{extend:"Ext.grid.Panel",requires:["School.store.multimedia.VideoMgr"],alias:"widget.videomgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.multimedia.VideoMgr"),this.columns=[{text:"视频id",align:"center",hidden:!0,dataIndex:"id"},{text:"视频库id",align:"center",hidden:!0,dataIndex:"tMId"},{text:"视频名称",dataIndex:"name"},{text:"视频路径",dataIndex:"videoPath"},{xtype:"actioncolumn",header:"播放视频",itemId:"playvideo",align:"center",items:[{iconCls:"play",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{xtype:"button",iconCls:"add",itemId:"uploadVideo",text:"上传视频"},{xtype:"button",iconCls:"delete",itemId:"deleteVideo",text:"删除视频"},{xtype:"label",margin:"0 0 0 100",text:"当前视频库："},{xtype:"label",itemId:"libName",style:{color:"red",fontWeight:"800"}}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.news.CopyNews",{extend:"Ext.window.Window",requires:["School.view.area.SelectSchool","School.view.school.SelectGrade"],closeAction:"destroy",alias:"widget.copynews",closable:!0,resizable:!1,modal:!0,autoShow:!0,width:320,height:400,overflowY:!0,title:"复制新闻",buttons:[{text:"提交",itemId:"save",width:"100%"}]}),Ext.define("School.view.news.EditNews",{extend:"Ext.panel.Panel",alias:"widget.editnews",html:'<iframe src="ueditor.html" frameborder=0 width=100% height=100% id="editNews"></iframe>',buttons:[{text:"预览&发布",itemId:"previewbtn",permissionId:"doPublishNews",height:30,width:"100%"}]}),Ext.define("School.view.news.NewsMgr",{extend:"Ext.grid.Panel",requires:["School.store.news.NewsMgr"],alias:"widget.newsmgr",forceFit:!0,initComponent:function(){var e=this;e.store=Ext.create("School.store.news.NewsMgr"),e.gradeStore=Ext.create("School.store.school.GradeMgr",{autoLoad:!0}),e.columns=[{text:"新闻id",hidden:!0,dataIndex:"id"},{tex:"新闻地址",hidden:!0,
dataIndex:"url"},{text:"标题图片",hidden:!0,dataIndex:"titlephoto"},{text:"新闻标题",dataIndex:"title"},{text:"发表时间",dataIndex:"createTime"},{text:"新闻类型",dataIndex:"type",renderer:function(e){switch(e){case"news":return"校园新闻";case"notice":return"校园公告";case"reward":return"荣誉之窗";case"teaching":return"教育热讯";default:return"校园新闻"}}},{xtype:"actioncolumn",width:50,header:"查看新闻",itemId:"details",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]},{xtype:"actioncolumn",width:50,header:"置顶",align:"center",itemId:"settop",items:[{iconCls:"upload",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]},{xtype:"actioncolumn",width:50,header:"复制新闻",permissionId:"copyNews",itemId:"copy",align:"center",items:[{iconCls:"copy",handler:function(t,o,a){var l=e.getItemId();return"hotnewslist"!==l&&"classnews"!==l?(School.util.Util.showWarningMsg("该新闻不可以被复制"),0):void this.fireEvent("itemclick",t,o,a)}}]},{xtype:"actioncolumn",width:50,header:"删除新闻",permissionId:"deleteNews",align:"center",itemId:"delete",items:[{iconCls:"delete",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"新闻类别",labelWidth:60,itemId:"newscombo",xtype:"combo",triggerAction:"all",width:250,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:[["news","校园新闻"],["notice","校园公告"],["reward","荣誉之窗"],["teaching","教育热讯"]],queryMode:"local"},{fieldLabel:"年级选择",width:200,labelWidth:60,itemId:"mygrades",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:this.gradeStore,queryMode:"local"},{xtype:"button",text:"发表新闻",itemId:"publish",permissionId:"publishNews",iconCls:"menu_users"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.news.PreviewNews",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.previewnews",closable:!0,resizable:!1,draggable:!1,modal:!0,autoShow:!0,layout:{type:"fit",align:"stretch"},width:320,height:580,title:"预览",buttons:[{text:"发布",itemId:"save",width:"100%"}]}),Ext.define("School.view.news.PublishNews",{extend:"Ext.panel.Panel",alias:"widget.publishnews",layout:{type:"border"},items:[{region:"center",itemId:"center",layout:"fit",dockedItems:[{xtype:"toolbar",layout:"fit",items:[{xtype:"form",layout:"anchor",defaults:{xtype:"textfield",margin:"10 10",anchor:"100%",allowBlank:!1,labelWidth:70},items:[{xtype:"textfield",itemId:"selectedschools",fieldLabel:"可见学校",emptyText:"请从窗口右边选择相应的地区学校",readOnly:!0},{itemId:"title",fieldLabel:"新闻标题",name:"title",emptyText:"请输入新闻标题"},{itemId:"date",name:"createTime",fieldLabel:"发布日期",xtype:"datefield",editable:!1,value:Ext.util.Format.date(new Date),format:"Y-m-d",emptyText:"请输入发布日期，格式如：2015-08-01"},{fieldLabel:"新闻类别",name:"type",itemId:"newscombo",xtype:"combo",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",value:"news",store:[["news","校园新闻"],["notice","校园公告"],["reward","荣誉之窗"]],queryMode:"local"},{xtype:"label",text:"文章内容:"}]}]}]}],buttons:[{text:"预览&发布",itemId:"previewbtn",permissionId:"doPublishNews",height:30,width:"100%"}]}),Ext.define("School.view.news.ReadNews",{extend:"Ext.panel.Panel",alias:"widget.readnews",title:"查看新闻",layout:{type:"fit"}}),Ext.define("School.view.push.ContactTree",{extend:"Ext.panel.Panel",alias:"widget.contacttree",requires:["School.store.push.Contact","School.store.push.SchoolContact"],layout:"border",items:[{region:"north",xtype:"treepanel",itemId:"schoolcontact",title:"发送至全校学生",permissionId:"sendMessageToStudent",rootVisible:!1,frame:!1,displayField:"name",store:Ext.create("School.store.push.SchoolContact")},{region:"center",itemId:"contactPanel",xtype:"treepanel",title:"联系人列表",rootVisible:!1,frame:!1,split:!0,overflowY:"auto",displayField:"name",store:Ext.create("School.store.push.Contact")}]}),Ext.define("School.view.push.Horn",{extend:"Ext.panel.Panel",alias:"widget.horn",initComponent:function(){var e=this;Ext.apply(e,{layout:"border",padding:15,items:[{region:"north",hight:200,xtype:"form",layout:"anchor",defaults:{labelWidth:70,anchor:"100%",margin:"10 0"},items:[{xtype:"datefield",fieldLabel:"开始时间",format:"Y-m-d",editable:!1,value:Ext.util.Format.date(new Date,"Y-m-d"),itemId:"beginTime",allowBlank:!1},{xtype:"datefield",fieldLabel:"结束时间",format:"Y-m-d",editable:!1,itemId:"endTime",allowBlank:!1},{xtype:"combo",fieldLabel:"学期选择",itemId:"termCombo",displayField:"name",valueField:"id",store:Ext.create("School.store.school.Semester",{autoLoad:!1}),hidden:!0}]},{xtype:"form",region:"center",layout:"anchor",items:[{xtype:"textarea",itemId:"textarea",fieldLabel:"内容",labelWidth:70,anchor:"100%",margin:"10 0",grow:!0,allowBlank:!1}]}],buttons:[{text:"清空",handler:function(e){e.up("panel").down("textarea#textarea").setValue("")}},{text:"发送",handler:function(e){var t=e.up("panel"),o=t.down("datefield#beginTime").getRawValue(),a=t.down("datefield#endTime").getRawValue(),l=t.down("textarea#textarea").getValue(),i=t.down("combo#termCombo");return l&&a&&o?void Ext.Ajax.request({url:zyHost+"horn/pushHorn",params:{message:l,beginTime:o,endTime:a,userId:zy_teacherId,semesterId:i.getValue()},success:function(e){School.util.Util.showSuccessMsg("发送小喇叭成功！"),t.close()}}):void School.util.Util.showErrorMsg("结束时间和内容不能为空！")}}]}),e.callParent()}}),Ext.define("School.view.push.MsgList",{extend:"Ext.grid.Panel",requires:["School.store.push.MsgList"],alias:"widget.msglist",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.push.MsgList"),this.columns=[{text:"消息id",hidden:!0,dataIndex:"id"},{text:"消息内容",flex:10,dataIndex:"content"},{text:"收件人",flex:10,dataIndex:"receiversName",renderer:function(e){return e.join(",")}},{text:"发送日期",flex:4,dataIndex:"sendTime"}],this.dockedItems=[{xtype:"toolbar",dock:"top",defaults:{labelWidth:20},items:[{xtype:"label",text:"时间范围:",margin:"0 10"},{xtype:"datefield",format:"Y-m-d",emptyText:"日期格式：xxxx-xx-xx",fieldLabel:"从",itemId:"beginTime"},{xtype:"datefield",format:"Y-m-d",emptyText:"日期格式：xxxx-xx-xx",fieldLabel:"到",itemId:"endTime"},{xtype:"button",iconCls:"key_go",text:"查询",itemId:"query"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.plugins=[{ptype:"rowexpander",rowBodyTpl:new Ext.XTemplate('<p style="font-weight:800">信息详情</p>',"<p>{content}</p>",'<p style="font-weight:800">收件人</p>',"<p>{receiversName}</p>")}],this.callParent(arguments)}}),Ext.define("School.view.push.PushPanel",{extend:"Ext.panel.Panel",alias:"widget.pushpanel",requires:["School.view.push.ContactTree"],layout:"border",initComponent:function(){var e=this;Ext.apply(e,{items:[{region:"east",xtype:"contacttree",width:300},{region:"center",xtype:"form",layout:"border",bodyPadding:10,bodyStyle:{background:"#fff"},items:[{layout:"anchor",defaults:{labelWidth:70,anchor:"100%",margin:"10 0"},items:[{xtype:"textfield",itemId:"receiverName",name:"name",fieldLabel:"收信人",readOnly:!0,emptyText:"请在右边侧栏选择收信人"},{xtype:"combobox",itemId:"pushType",name:"kindId",fieldLabel:"通知类型",store:Ext.create("Ext.data.Store",{fields:["kind","name"],data:[{kind:"1",name:"作业"},{kind:"2",name:"通知"},{kind:"3",name:"公告"},{kind:"4",name:"其他"}]}),displayField:"name",valueField:"kind",editable:!1,value:"1"}],region:"north",height:69},{region:"center",xtype:"textarea",itemId:"content",name:"content",rows:10,grow:!0,fieldLabel:"正文",allowBlank:!1,emptyText:"信息的主要内容...",labelWidth:70,anchor:"100%",margin:"10 0"}],buttons:[{text:"清空正文",itemId:"resetContent"},{text:"发送",itemId:"doSend",permissionId:"doPush",formBind:!0}]}]}),e.callParent()}}),Ext.define("School.view.school.AddClass",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addclass",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"新增班级",autoShow:!0,initComponent:function(){this.items=[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,style:{marginTop:"20px"}},items:[{name:"id",hidden:!0,fieldLabel:"班级id",allowBlank:!0},{name:"tScGradeId",hidden:!0,fieldLabel:"所属年级id",allowBlank:!0},{name:"name",allowBlank:!1,afterLabelTextTpl:School.util.Util.required,fieldLabel:"班级名称",itemId:"className"},{name:"sortName",fieldLabel:"班级简称"},{name:"comment",fieldLabel:"班级简介"},{fieldLabel:"班主任",name:"teacherId",allowBlank:!0,afterLabelTextTpl:"",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",store:Ext.create("School.store.school.TeacherMgr",{pageSize:300}),editable:!0,typeAhead:!0,typeAheadDelay:50,forceSelection:!0,queryMode:"local",displayField:"name",valueField:"id"},{name:"info",xtype:"textarea",fieldLabel:"备注"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}],this.callParent(arguments)}}),Ext.define("School.view.school.AddCourse",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addcourse",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"新增学科",autoShow:!0,initComponent:function(){this.items=[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:90,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",msgTarget:"under",allowBlank:!1,style:{marginTop:"20px"}},items:[{name:"id",hidden:!0,allowBlank:!0,fieldLabel:"科目id"},{name:"name",fieldLabel:"科目名称",maxLength:32,emptyText:"不能超过32字"},{fieldLabel:"负责人",name:"tScTeacherId",allowBlank:!0,afterLabelTextTpl:"",itemId:"selectSubjectMgr",xtype:"combobox",triggerAction:"all",width:250,emptyText:"请选择...",store:Ext.create("School.store.school.TeacherMgr",{pageSize:300}),editable:!0,typeAhead:!0,typeAheadDelay:50,forceSelection:!0,queryMode:"local",displayField:"name",valueField:"id"},{xtype:"radiogroup",labelWidth:80,allowBlank:!1,itemId:"trunk",name:"trunk",fieldLabel:"主干课程",columns:2,labelAlign:"left",items:[{boxLabel:"是",name:"trunk",inputValue:"1"},{boxLabel:"否",name:"trunk",inputValue:"0"}]},{name:"comment",xtype:"textarea",fieldLabel:"科目描述",maxLength:150,emptyText:"不能超过150字",allowBlank:!0,afterLabelTextTpl:""}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}],this.callParent(arguments)}}),Ext.define("School.view.school.AddCurricula",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addcuricula",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"增加课程",autoShow:!0,initComponent:function(){this.items=[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:90,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,style:{marginTop:"20px"}},items:[{name:"id",hidden:!0,allowBlank:!0,fieldLabel:"课程id"},{name:"tScSubjectId",allowBlank:!0,hidden:!0,fieldLabel:"科目id"},{name:"name",fieldLabel:"课程名字",maxLength:32,emptyText:"不能超过32字"},{fieldLabel:"负责人",name:"tScTeacherId",allowBlank:!0,afterLabelTextTpl:"",itemId:"selectcourseMgr",xtype:"combobox",emptyText:"请选择...",store:Ext.create("School.store.school.TeacherMgr",{pageSize:300}),editable:!0,typeAhead:!0,typeAheadDelay:50,forceSelection:!0,displayField:"name",valueField:"id",queryMode:"local"},{fieldLabel:"适用年级",name:"adaptiveGrade",allowBlank:!1,itemId:"selectGradeTeacher",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"name",store:Ext.create("School.store.school.GradeMgr"),queryMode:"remote"},{fieldLabel:"适用学期",name:"adaptiveTerm",allowBlank:!1,value:"请选择...",itemId:"selectTerm",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:[["上学期","上学期"],["下学期","下学期"]],queryMode:"local"},{name:"comment",xtype:"textarea",fieldLabel:"课程描述",maxLength:150,allowBlank:!0,afterLabelTextTpl:"",emptyText:"不能超过150字"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}],this.callParent(arguments)}}),Ext.define("School.view.school.AddGrade",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addgrade",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"新增年级",autoShow:!0,initComponent:function(){this.items=[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,style:{marginTop:"20px"}},items:[{name:"id",hidden:!0,allowBlank:!0,fieldLabel:"年级id"},{name:"name",fieldLabel:"年级名称",itemId:"gradeName",maxLength:16,emptyText:"提交之后不能修改,字数不能超过16"},{name:"sortName",fieldLabel:"年级简称",maxLength:10,emptyText:"字数不能超过10"},{name:"year",xtype:"datefield",format:"Y-m-d",editable:!0,emptyText:"格式如：2010-09-01",fieldLabel:"入学时间",msgTarget:"under",invalidText:"格式有误，请按2010-09-01格式填写"},{name:"level",allowBlank:!0,hidden:!0,fieldLabel:"学龄"},{fieldLabel:"级长",name:"teacherId",allowBlank:!0,afterLabelTextTpl:"",itemId:"selectGradeTeacher",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",store:Ext.create("School.store.school.TeacherMgr",{pageSize:300}),editable:!0,typeAhead:!0,typeAheadDelay:50,forceSelection:!0,queryMode:"local",displayField:"name",valueField:"id"},{fieldLabel:"年级简介",name:"comment",allowBlank:!0,xtype:"textarea",afterLabelTextTpl:"",maxLength:150,emptyText:"字数不能超过150"},{name:"info",fieldLabel:"备注",xtype:"textarea",allowBlank:!0,afterLabelTextTpl:"",maxLength:150,emptyText:"字数不能超过150"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}],this.callParent(arguments)}}),Ext.define("School.view.school.AddMultiClass",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addmulticlass",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"批量新增班级",autoShow:!0,initComponent:function(){this.items=[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:90,afterLabelTextTpl:School.util.Util.required,labelSeparator:":",allowBlank:!1,style:{marginTop:"20px"}},items:[{fieldLabel:"所属年级",itemId:"gradecombo",xtype:"combo",name:"tScGradeId",triggerAction:"all",width:250,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.GradeMgr"),queryMode:"remote"},{xtype:"numberfield",itemId:"start",fieldLabel:"最小班级序号",emptyText:"请输入最小班级序号，如：1",maxValue:100,minValue:1,allowDecimals:!1,hideTrigger:!0},{xtype:"numberfield",itemId:"end",fieldLabel:"最大班级序号",emptyText:"请输入最大班级序号，如：20",maxValue:100,minValue:1,allowDecimals:!1,hideTrigger:!0}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}],this.callParent(arguments)}}),Ext.define("School.view.school.AddMultiCurricula",{extend:"Ext.window.Window",alias:"widget.addmulticurricula",autoShow:!0,closeAction:"destroy",autoShow:!0,modal:!0,width:360,height:400,title:"批量新增课程",layout:"fit",initComponent:function(){this.items=[{xtype:"form",layout:"anchor",padding:"10 10",defaults:{labelWidth:70,margin:"20 0",anchor:"100%"},items:[{fieldLabel:"所属学科",allowBlank:!1,msgTarget:"side",afterLabelTextTpl:School.util.Util.required,name:"tScSubjectId",itemId:"coursecombo",xtype:"combo",triggerAction:"all",displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.school.CourseMgr"),queryMode:"remote"},{fieldLabel:"适用学期",allowBlank:!1,msgTarget:"side",afterLabelTextTpl:School.util.Util.required,itemId:"selectTerm",xtype:"checkboxgroup",columns:2,items:[{boxLabel:"上学期",name:"terms",inputValue:"上学期"},{boxLabel:"下学期",name:"terms",inputValue:"下学期"}]},{xtype:"checkboxgroup",msgTarget:"side",afterLabelTextTpl:School.util.Util.required,fieldLabel:"适用年级",allowBlank:!1,itemId:"gradecheckbox",columns:3,items:[]},{xtype:"textarea",fieldLabel:"备注信息",name:"comment",maxLength:150,emptyText:"不能超过150字"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}],this.callParent(arguments)}}),Ext.define("School.view.school.AddStudent",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addstudent",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"新增学生",autoShow:!0,items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:90,msgTarget:"under",afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,style:{marginTop:"20px"}},items:[{name:"studentId",hidden:!0,fieldLabel:"学生id",allowBlank:!0},{name:"parentId",hidden:!0,fieldLabel:"家长id",allowBlank:!0},{name:"studentIDCard",afterLabelTextTpl:" ",fieldLabel:"学生学号",allowBlank:!0,maxLength:20,emptyText:"字数不能超过20"},{name:"studentName",fieldLabel:"学生姓名",maxLength:25},{xtype:"radiogroup",itemId:"student_sex",name:"studentGender",fieldLabel:"学生性别",columns:2,labelAlign:"left",blankText:"该输入项为必输项",items:[{boxLabel:"男",name:"studentGender",inputValue:"男"},{boxLabel:"女",name:"studentGender",inputValue:"女"}]},{name:"studentAddress",afterLabelTextTpl:" ",allowBlank:!0,fieldLabel:"学生住址",maxLength:64,emptyText:"字数不能超过64"},{fieldLabel:"出生日期",xtype:"datefield",allowBlank:!0,itemId:"student-Birthday",format:"Y-m-d",msgTarget:"under",invalidText:"格式有误，请按2010-09-01格式填写",afterLabelTextTpl:" ",name:"studentBirthday"},{name:"studentPhone",afterLabelTextTpl:" ",allowBlank:!0,fieldLabel:"固定电话",regex:/^[0-9]*$/,maxLength:16,emptyText:"只能为数字，不能超过16位",invalidText:"只能为数字，不能超过16位"},{name:"parentName",afterLabelTextTpl:" ",allowBlank:!0,fieldLabel:"监护人姓名",maxLength:25},{name:"parentPhone",fieldLabel:"监护人手机"},{name:"emergencyPhone",afterLabelTextTpl:" ",allowBlank:!0,fieldLabel:"紧急电话",maxLength:16}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.school.AddTerm",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addterm",closable:!0,modal:!0,layout:{type:"fit",align:"stretch"},width:350,title:"新增学期",autoShow:!0,initComponent:function(){var e=this;e.items=[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,msgTarget:"under",afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,style:{marginTop:"20px"}},items:[{name:"id",hidden:!0,allowBlank:!0,fieldLabel:"学期id"},{name:"name",fieldLabel:"学期名称",emptyText:"格式为 xxxx年秋上(春下)学期",regex:/^[0-9]{4}年(([秋][上])|([春][下]))学期$/,regexText:"格式为 xxxx年秋上(春下)学期"},{name:"startTime",fieldLabel:"开始时间",format:"Y-m-d",xtype:"datefield",msgTarget:"under",invalidText:"格式有误，请按2010-09-01格式填写",emptyText:"格式如：2016-08-08",editable:!0},{name:"endTime",fieldLabel:"结束时间",format:"Y-m-d",xtype:"datefield",msgTarget:"under",invalidText:"格式有误，请按2010-09-01格式填写",emptyText:"格式如：2016-08-08",editable:!0},{name:"week",fieldLabel:"持续周数",regex:/^[0-9]*$/,msgTarget:"under",invalidText:"只能为数字"},{xtype:"radiogroup",labelWidth:80,allowBlank:!1,name:"currentSemester",fieldLabel:"当前学期",columns:2,itemId:"isCurrent",labelAlign:"left",items:[{boxLabel:"是",name:"currentSemester",inputValue:"1"},{boxLabel:"否",name:"currentSemester",inputValue:"0"}]}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}],e.callParent(arguments)}}),Ext.define("School.view.school.ClassMgr",{extend:"Ext.grid.Panel",requires:["School.store.school.ClassMgr"],alias:"widget.classmgr",itemId:"classmgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.ClassMgr"),this.columns=[{text:"id",align:"center",hidden:!0,dataIndex:"id"},{text:"班级名称",sortable:!1,dataIndex:"name"},{text:"所属年级",dataIndex:"tScGradeId",renderer:function(e){return School.util.Util.getOtherValue(e,zy_gradeRec)}},{text:"班级简称",sortable:!1,dataIndex:"sortName"},{text:"班级简介",dataIndex:"comment"},{text:"班主任",sortable:!1,dataIndex:"headTeacher"},{text:"备注",dataIndex:"info"}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"年级选择",labelWidth:60,itemId:"classcombo",xtype:"combo",triggerAction:"all",width:250,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.GradeMgr"),queryMode:"remote"},{xtype:"button",text:"新增班级",itemId:"add",iconCls:"add"},{xtype:"button",text:"编辑班级",itemId:"edit",iconCls:"edit"},{xtype:"button",text:"删除班级",itemId:"delete",iconCls:"delete"},{xtype:"label",margin:"0 0 0 100",text:"当前年级："},{xtype:"label",itemId:"gradeName",style:{color:"red",fontWeight:"800"}}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.school.CourseMgr",{extend:"Ext.grid.Panel",requires:["School.store.school.CourseMgr"],alias:"widget.coursemgr",itemId:"coursemgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.CourseMgr"),this.columns=[{text:"id",hidden:!0,dataIndex:"id"},{text:"科目负责人id",flex:2,dataIndex:"tScTeacherId",hidden:!0},{text:"学科名称",flex:2,dataIndex:"name"},{text:"学科负责人",flex:2,dataIndex:"teacherName"},{text:"主干课程",flex:2,dataIndex:"trunk",renderer:function(e){return"1"==e?"是":"否"}},{text:"学科描述",flex:2,dataIndex:"comment"},{xtype:"actioncolumn",permissionId:"seeCourse",header:"查看相关课程",align:"center",flex:2,items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{xtype:"button",text:"新增学科",itemId:"add",permissionId:"addSubject",iconCls:"add"},{xtype:"button",text:"编辑学科",itemId:"edit",permissionId:"editSubject",iconCls:"edit"},{xtype:"button",text:"删除学科",itemId:"delete",permissionId:"deleteSubject",iconCls:"delete"},{xtype:"button",text:"考试相关设置",itemId:"examSetting",permissionId:"examSetting",iconCls:"key"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.school.CurriculaMgr",{extend:"Ext.grid.Panel",requires:["School.store.school.CurriculaMgr"],alias:"widget.curriculamgr",itemId:"curriculamgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.CurriculaMgr"),this.columns=[{text:"学科id",align:"center",hidden:!0,dataIndex:"tScSubjectId"},{text:"课程id",align:"center",hidden:!0,dataIndex:"id"},{text:"课程负责人id",flex:2,dataIndex:"tScTeacherId",hidden:!0},{text:"课程名称",dataIndex:"name"},{text:"课程负责人",dataIndex:"teacherName"},{text:"所属学科",dataIndex:"tScSubjectId",renderer:function(e){return School.util.Util.getOtherValue(e,zy_subjectRec)}},{text:"适用年级",dataIndex:"adaptiveGrade"},{text:"适用学期",dataIndex:"adaptiveTerm"},{text:"课程描述",dataIndex:"comment"}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"学科选择",labelWidth:60,itemId:"curriculacombo",xtype:"combo",triggerAction:"all",width:200,displayField:"name",emptyText:"请选择...",editable:!1,valueField:"id",store:Ext.create("School.store.school.CourseMgr"),queryMode:"remote"},{xtype:"button",text:"新增课程",itemId:"add",iconCls:"add"},{xtype:"button",text:"编辑课程",itemId:"edit",iconCls:"edit"},{xtype:"button",text:"删除课程",itemId:"delete",iconCls:"delete"},{xtype:"label",margin:"0 0 0 100",text:"当前学科："},{xtype:"label",itemId:"courseName",style:{color:"red",fontWeight:"800"}}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.school.DepartMgr",{extend:"Ext.grid.Panel",requires:["School.store.school.DepartMgr"],alias:"widget.departmgr",itemId:"departmgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.DepartMgr"),this.columns=[{text:"部门id",hidden:!0,dataIndex:"id"},{text:"学校Id",hidden:!0,dataIndex:"tScSchoolId"},{text:"科目id",hidden:!0,dataIndex:"tScSubjectId"},{text:"部门名称",dataIndex:"name"},{text:"联系电话",dataIndex:"phone"},{text:"部门类型",dataIndex:"type"},{text:"部门人员",dataIndex:"teachers",renderer:function(e){for(var t="",o=0;o<e.length;o++)t+=e[o].name+" ";return t}},{text:"备注",dataIndex:"info"},{xtype:"actioncolumn",itemId:"edit",header:"编辑部门人员",permissionId:"editDepartmentMember",align:"center",items:[{iconCls:"edit",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{xtype:"button",text:"新增",itemId:"add",permissionId:"addDepartment",iconCls:"add"},{xtype:"button",text:"编辑",itemId:"edit",permissionId:"editDepartment",iconCls:"edit"},{xtype:"button",text:"删除",itemId:"delete",permissionId:"deleteDepartment",iconCls:"delete"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.school.GradeMgr",{extend:"Ext.grid.Panel",requires:["School.store.school.GradeMgr"],itemId:"grademgr",alias:"widget.grademgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.GradeMgr"),this.columns=[{text:"年级id",hidden:!0,dataIndex:"id"},{text:"年级名称",dataIndex:"name"},{text:"年级简称",dataIndex:"sortName"},{text:"入学时间",dataIndex:"year"},{text:"学龄",hidden:!0,hidden:!0,dataIndex:"level"},{text:"级长",dataIndex:"gradeTeacher"},{text:"年级简介",dataIndex:"comment"},{text:"备注",dataIndex:"info"},{xtype:"actioncolumn",header:"查看相关班级",permissionId:"seeClass",align:"center",items:[{iconCls:"key_go",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{xtype:"button",text:"新增年级",itemId:"add",permissionId:"addGrade",iconCls:"add"},{xtype:"button",text:"编辑年级",itemId:"edit",permissionId:"editGrade",iconCls:"edit"},{xtype:"button",text:"删除年级",itemId:"delete",permissionId:"deleteGrade",iconCls:"delete"},{xtype:"button",text:"全校年级升级",itemId:"up",iconCls:"upload"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.school.MyClass",{extend:"Ext.grid.Panel",requires:["School.store.school.MyClass"],alias:"widget.myclass",itemId:"myclass",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.MyClass",{pageSize:100}),this.columns=[{text:"学生id",hidden:!0,dataIndex:"studentId"},{text:"家长id",hidden:!0,dataIndex:"parentId"},{text:"出生日期",hidden:!0,xtype:"datefield",format:"Y-m-d",dataIndex:"studentBirthday"},{text:"学号",flex:3,dataIndex:"studentIDCard"},{text:"姓名",flex:3,dataIndex:"studentName"},{text:"性别",flex:3,dataIndex:"studentGender"},{text:"住址",flex:3,dataIndex:"studentAddress"},{text:"固定电话",flex:3,dataIndex:"studentPhone"},{text:"监护人",flex:3,dataIndex:"parentName"},{text:"监护人手机",readOnly:!0,flex:3,dataIndex:"parentPhone"},{text:"紧急电话",readOnly:!0,flex:3,dataIndex:"emergencyPhone"},{xtype:"actioncolumn",flex:1,header:"删除",permissionId:"deleteStudent",align:"center",items:[{iconCls:"delete",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"我的班级",width:200,labelWidth:60,itemId:"myclasses",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:zy_classes,queryMode:"local"},{xtype:"button",text:"导入学生",itemId:"upload",permissionId:"uploadStudent",iconCls:"upload"},{xtype:"button",text:"导出学生",itemId:"download",permissionId:"downloadStudent",iconCls:"download"},{xtype:"button",text:"编辑",itemId:"edit",permissionId:"editStudent",iconCls:"edit"},{xtype:"button",text:"新增",itemId:"addstudent",permissionId:"insertStudent",iconCls:"add"},{xtype:"button",text:"查看课表",itemId:"viewSyllabus",permissionId:"viewSyllabus",iconCls:"key_go"},{xtype:"button",text:"查看帖子",itemId:"viewPost",permissionId:"viewPost",iconCls:"key_go"},{xtype:"label",margin:"0 0 0 50",text:"当前班级："},{xtype:"label",itemId:"className",style:{color:"red",fontWeight:"800"}}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.school.PublishSchoolSummy",{extend:"Ext.panel.Panel",alias:"widget.publishschoolsummy",title:"发布校园简介",html:""}),Ext.define("School.view.school.SchoolSummy",{extend:"Ext.panel.Panel",alias:"widget.schoolsummy",title:"校园简介",layout:{type:"fit"},buttons:[{xtype:"button",text:"新建校园简介",permissionId:"addIntroSchool",itemId:"publish",width:"100%",height:30}]}),Ext.define("School.view.school.SelectCurricula",{extend:"Ext.grid.Panel",requires:["School.store.school.SelectCurricula","School.util.ComponentColumn"],alias:"widget.selectcurricula",plugins:{ptype:"cellediting",clicksToEdit:1},forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.SelectCurricula"),this.columns=[{text:"班级名称",dataIndex:"name"},{dataIndex:"id",hidden:!0,text:"id"},{text:"所属年级",dataIndex:"tScGradeId",renderer:function(e){return School.util.Util.getOtherValue(e,zy_gradeRec)}},{text:"班级简称",dataIndex:"sortName"},{text:"班级简介",hidden:!0,dataIndex:"comment"},{text:"班主任",hidden:!0,dataIndex:"headTeacher"},{text:"备注",hidden:!0,dataIndex:"info"},{xtype:"componentcolumn",text:"任课老师",renderer:function(e,t,o){return{name:"headTeacher",allowBlank:!0,afterLabelTextTpl:"",itemId:"selectTeacher",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",store:zy_teacherStore,editable:!0,typeAhead:!0,typeAheadDelay:50,forceSelection:!0,displayField:"name",valueField:"id",queryMode:"local",value:o.data.curriculaTeacherId}}}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"学科选择",labelWidth:60,itemId:"subjectcombo",xtype:"combo",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.CourseMgr"),queryMode:"remote"},{fieldLabel:"年级选择",labelWidth:60,itemId:"gradecombo",xtype:"combo",triggerAction:"all",width:150,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.GradeMgr"),queryMode:"remote"},{fieldLabel:"学期选择",labelWidth:60,itemId:"termcombo",xtype:"combobox",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"name",store:Ext.create("School.store.school.Semester"),queryMode:"remote"},{xtype:"button",iconCls:"key_go",text:"查询",itemId:"queryCurricula"},{xtype:"tbseparator"},{xtype:"label",margin:"0 0 0 20",text:"当前课程："},{xtype:"label",style:{color:"red",fontWeight:800},itemId:"curriculaname"}]}],this.buttons=[{xtype:"tbfill"},{text:"保存选课",itemId:"save",height:30,width:"100%"}],this.callParent(arguments)}}),Ext.define("School.view.school.SelectGrade",{extend:"Ext.grid.Panel",requires:["School.store.school.GradeMgr"],alias:"widget.selectgrade",forceFit:!0,selType:"checkboxmodel",initComponent:function(){this.store=Ext.create("School.store.school.GradeMgr"),this.columns=[{text:"年级id",hidden:!0,dataIndex:"id"},{text:"年级名称",dataIndex:"name"}],this.callParent(arguments)}}),Ext.define("School.view.school.ShowSelectedCurricula",{extend:"Ext.grid.Panel",requires:["School.store.school.ShowSelectedCurricula"],itemId:"showselectedcurricula",alias:"widget.showselectedcurricula",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.ShowSelectedCurricula"),this.columns=[{text:"id",hidden:!0,dataIndex:"id"},{text:"课程id",hidden:!0,dataIndex:"curriculaId"},{text:"课程名称",dataIndex:"curriculaName"},{text:"班级名称",dataIndex:"clazzName"},{text:"任课老师",dataIndex:"teacherName"},{text:"任课老师电话",dataIndex:"phone"},{xtype:"actioncolumn",header:"开设考试",itemId:"addExam",permissionId:"addExam",align:"center",items:[{iconCls:"add",handler:function(e,t,o){this.fireEvent("itemclick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{fieldLabel:"学科选择",labelWidth:60,itemId:"subjectcombo",xtype:"combo",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.CourseMgr"),queryMode:"remote"},{fieldLabel:"年级选择",labelWidth:60,itemId:"gradecombo",xtype:"combo",triggerAction:"all",width:150,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.GradeMgr"),queryMode:"remote"},{fieldLabel:"学期选择",labelWidth:60,itemId:"termcombo",xtype:"combobox",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.Semester"),queryMode:"remote"},{xtype:"button",
iconCls:"cancel",text:"重置",itemId:"resetcombo"},{xtype:"tbseparator"},{text:"新增选课",iconCls:"add",itemId:"addSelect",xtype:"button"},{xtype:"tbseparator"},{text:"删除选课",iconCls:"delete",itemId:"deleteSelect",xtype:"button"},{xtype:"tbseparator"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.school.Syllabus",{extend:"Ext.panel.Panel",alias:"widget.syllabus",itemId:"syllabus",html:'<iframe src="course-schedule.html" id="mycourseSchedule"  frameborder=0 width=100% height=100%></iframe>',buttons:[{xtype:"button",margin:"0 20 0 20",text:"导出课程表",itemId:"download",iconCls:"download"},{xtype:"button",text:"导入课程表",itemId:"upload",iconCls:"upload"}]}),Ext.define("School.view.school.Termmgr",{extend:"Ext.grid.Panel",requires:["School.store.school.Termmgr"],itemId:"termmgr",alias:"widget.termmgr",forceFit:!0,initComponent:function(){var e=this;e.store=Ext.create("School.store.school.Termmgr"),e.columns=[{text:"学期id",dataIndex:"id",hidden:!0},{text:"学期名称",dataIndex:"name"},{text:"开始时间",dataIndex:"startTime"},{text:"结束时间",dataIndex:"endTime"},{text:"周数",dataIndex:"week"},{text:"创建时间",dataIndex:"createTime"},{text:"是否为当前学期",dataIndex:"currentSemester",hidden:!0}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{xtype:"button",text:"新增学期",itemId:"add",iconCls:"add"},{xtype:"button",text:"编辑学期",itemId:"edit",iconCls:"edit"},{xtype:"button",text:"设为当前学期",itemId:"set",iconCls:"menu_users"},{xtype:"form",items:{xtype:"label",margin:"10 10 10 10",text:"",itemId:"currentSemesterName",style:{color:"red",fontWeight:800}}}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],e.callParent(arguments)}}),Ext.define("School.view.school.UploadStudent",{extend:"Ext.window.Window",title:"导入学生",closeAction:"destroy",alias:"widget.uploadstudent",modal:!0,layout:{type:"fit"},width:350,items:[{xtype:"form",defaults:{width:300,labelWidth:70,margin:10},items:[{xtype:"filefield",name:"file",allowBlank:!1,fieldLabel:"文件选择",buttonText:"浏览文件"}],buttons:[{text:"上传",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.school.UploadSyllabus",{extend:"Ext.window.Window",title:"上传课程表",closeAction:"destroy",alias:"widget.uploadsyllabus",modal:!0,layout:{type:"fit"},width:350,items:[{xtype:"form",defaults:{width:300,labelWidth:70,margin:10},items:[{fieldLabel:"适用学期",itemId:"termcombo",xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.Semester"),queryMode:"remote"},{xtype:"filefield",name:"file",allowBlank:!1,fieldLabel:"文件选择",buttonText:"浏览文件"}],buttons:[{text:"上传",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.school.UploadTeacher",{extend:"Ext.window.Window",title:"导入教师",closeAction:"destroy",alias:"widget.uploadteacher",modal:!0,layout:{type:"fit"},width:350,items:[{xtype:"form",defaults:{width:300,labelWidth:70,margin:10},items:[{xtype:"filefield",name:"file",allowBlank:!1,fieldLabel:"文件选择",buttonText:"浏览文件"}],buttons:[{text:"上传",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.teacher.AddDepart",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.adddepart",closable:!0,modal:!0,autoShow:!0,layout:{type:"fit",align:"stretch"},width:350,title:"新增部门",items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,msgTarget:"under",style:{marginTop:"20px"}},items:[{name:"id",hidden:!0,allowBlank:!0,fieldLabel:"部门id"},{name:"tScSchoolId",hidden:!0,allowBlank:!0,fieldLabel:"部门id"},{name:"name",fieldLabel:"部门名称",maxLength:25},{fieldLabel:"部门类型",name:"type",allowBlank:!1,xtype:"combobox",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:[["行政","行政"],["教学","教学"],["其他","其他"]],queryMode:"local"},{name:"phone",type:"numberfield",fieldLabel:"联系方式",maxLength:16},{name:"info",fieldLabel:"备注",maxLength:64}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.teacher.AddTeacher",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.addteacher",closable:!0,modal:!0,autoShow:!0,layout:{type:"fit",align:"stretch"},width:350,title:"增加教师",items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:100,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,msgTarget:"under",style:{marginTop:"20px"},msgTarget:"side"},items:[{fieldLabel:"教师id",hidden:!0,allowBlank:!0,name:"id"},{fieldLabel:"班级id",hidden:!0,allowBlank:!0,name:"tScClassId"},{fieldLabel:"年级id",allowBlank:!0,hidden:!0,name:"tScGradeId"},{fieldLabel:"学校id",allowBlank:!0,hidden:!0,name:"tScSchoolId"},{fieldLabel:"教工号",name:"idcard",maxLength:18,itemId:"idCard"},{fieldLabel:"姓名",name:"name",maxLength:25,itemId:"teacherName"},{xtype:"radiogroup",itemId:"sex",name:"sex",fieldLabel:"性别",columns:2,blankText:"该输入项为必输项",labelAlign:"left",items:[{boxLabel:"男",name:"sex",inputValue:"男"},{boxLabel:"女",name:"sex",inputValue:"女"}]},{fieldLabel:"联系电话",name:"phone",maxLength:16,itemId:"phone"},{fieldLabel:"电子邮箱",allowBlank:!0,afterLabelTextTpl:"",name:"email",regex:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,regexText:"请输入正确格式的邮箱",maxLength:32,itemId:"email"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.teacher.DepartStaff",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.departstaff",closable:!0,autoShow:!0,resizable:!1,title:"编辑部门人员",modal:!0,itemId:"departstaff",layout:{type:"fit",align:"stretch"},width:720,initComponent:function(){this.items=[{xtype:"panel",items:[{xtype:"dataview",store:Ext.create("School.store.school.TeacherMgr",{autoLoad:!0,pageSize:1e3}),autoScroll:!0,itemSelector:"teachers",tpl:['<div  class="teachers">','<div class="title">部门人员</div>','<div class="staffs">','<tpl for=".">','<tpl if="this.check(id, 0)">','<div class="checkbox">','<label for="{id}"><input type="checkbox" id="{id}"  />{name}</label>',"</div>","</tpl>","</tpl>","</div>",'<div class="title">其他人员</div>','<div class="others">','<tpl for=".">','<tpl if="this.check(id, 1)">','<div class="checkbox">','<label for="{id}"><input type="checkbox" id="{id}"  />{name}</label>',"</div>","</tpl>","</tpl>","</div>","</div>",{check:function(e,t){var o=Ext.ComponentQuery.query("#departstaff")[0].datas.teachersId;return console.log(o),1===t?-1===o.indexOf(e)?!0:!1:-1===o.indexOf(e)?!1:!0}}]}]}],this.dockedItems=[{xtype:"toolbar",dock:"bottom",items:[{xtype:"tbfill"},{xtype:"checkbox",boxLabel:"全选部门人员",labelWidth:120,width:150,itemId:"allDept"},{xtype:"checkbox",boxLabel:"全选其他人员",labelWidth:120,width:150,itemId:"allNotDept"},{xtype:"button",text:"添加人员到部门",iconCls:"add",itemId:"add"},{xtype:"button",text:"移除部门人员",iconCls:"delete",itemId:"delete"}]}],this.callParent(arguments)}}),Ext.define("School.view.teacher.ResetPsd",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.resetpsd",closable:!0,modal:!0,autoShow:!0,layout:{type:"fit",align:"stretch"},width:350,title:"重置密码",items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:100,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,inputType:"password",msgTarget:"under",style:{marginTop:"20px"}},items:[{name:"userId",hidden:!0,allowBlank:!0,fieldLabel:"用户id"},{name:"adminPassword",fieldLabel:"管理员密码",maxLength:32},{name:"newPassword",fieldLabel:"新密码",maxLength:32},{name:"repeatPassword",fieldLabel:"确认新密码",maxLength:32}],buttonAlign:"center",buttons:[{text:"保存",itemId:"save"}]}]}),Ext.define("School.view.teacher.TeacherMgr",{extend:"Ext.grid.Panel",requires:["School.store.school.TeacherMgr"],alias:"widget.teachermgr",itemId:"teachermgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.school.TeacherMgr",{pageSize:15}),this.columns=[{text:"教师id",hidden:!0,dataIndex:"id"},{text:"班级id",hidden:!0,dataIndex:"tScClassId"},{text:"年级id",hidden:!0,dataIndex:"tScGradeId"},{text:"学校id",hidden:!0,dataIndex:"tScSchoolId"},{text:"教工号",dataIndex:"idcard"},{text:"姓名",dataIndex:"name"},{text:"性别",dataIndex:"sex"},{text:"联系电话",dataIndex:"phone"},{text:"电子邮箱",dataIndex:"email"},{text:"管理员",hidden:!0,align:"center",dataIndex:"isAuthc",renderer:function(e){return 1===parseInt(e)?"是":"否"}},{xtype:"actioncolumn",itemId:"resetPsd",header:"修改密码",permissionId:"resetPsd",align:"center",items:[{iconCls:"edit",handler:function(e,t,o){var a=e.getStore().getAt(t).get("id");this.fireEvent("itemclick",a)}}]}],this.dockedItems=[{xtype:"toolbar",flex:1,dock:"top",items:[{xtype:"button",text:"导出教师",itemId:"download",permissionId:"downloadTeacher",iconCls:"download"},{xtype:"button",text:"导入教师",permissionId:"uploadTeacher",itemId:"upload",iconCls:"upload"},{xtype:"button",text:"添加教师",permissionId:"addTeacher",itemId:"add",iconCls:"add"},{xtype:"button",text:"编辑教师",permissionId:"editTeacher",itemId:"edit",iconCls:"edit"},{xtype:"button",text:"删除教师",permissionId:"deleteTeacher",itemId:"delete",iconCls:"delete"}]},{xtype:"pagingtoolbar",store:this.getStore(),dock:"bottom",displayInfo:!0}],this.callParent(arguments)}}),Ext.define("School.view.auth.module.ArrangeBtnPermissionWin",{extend:"Ext.window.Window",alias:"widget.arrangebtnpermissionwin",requires:["Ext.grid.*","Ext.layout.container.HBox","School.store.auth.BtnPermission"],width:550,height:350,modal:!0,layout:{type:"hbox",align:"stretch",padding:5},initComponent:function(){var e=this.id+"group1",t=this.id+"group2",o=[{hidden:!0,dataIndex:"id"},{text:"按钮名称",dataIndex:"permission"},{text:"按钮描述",flex:1,dataIndex:"description"}];this.items=[{itemId:"unarrangedGrid",flex:1,xtype:"grid",viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:e,dropGroup:t}},store:Ext.create("School.store.auth.BtnPermission"),columns:o,stripeRows:!0,title:"未分配的按钮",margins:"0 5 0 0"},{itemId:"arrangedGrid",flex:1,xtype:"grid",viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:t,dropGroup:e}},store:Ext.create("School.store.auth.BtnPermission"),columns:o,stripeRows:!0,title:"已分配的按钮"}],this.buttons=[{text:"取消",itemId:"cancel"},{text:"保存",itemId:"save"}],this.callParent()}}),Ext.define("School.view.auth.module.ArrangeModule",{extend:"Ext.grid.Panel",alias:"widget.arrangemodule",columnLines:!0,viewConfig:{stripeRows:!0},requires:["School.store.auth.ArrangeModule"],initComponent:function(){var e=this;e.store=Ext.create("School.store.auth.ArrangeModule"),e.dockedItems=[{dock:"top",xtype:"toolbar",items:[{text:"分配模块",itemId:"arrangeBtn",permissionId:"arrangeModule",iconCls:"key"}]}],e.callParent()},columns:[{hidden:!0,dataIndex:"id"},{text:"角色",dataIndex:"name",align:"center",width:120},{text:"当前模块",dataIndex:"modules",flex:1,renderer:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o].text);return t.join(", ")}}]}),Ext.define("School.view.auth.module.ArrangeModuleWin",{extend:"Ext.window.Window",alias:"widget.arrangemodulewin",requires:["Ext.grid.*","Ext.layout.container.HBox","School.store.auth.ModuleTree"],width:350,height:350,autoScroll:!0,modal:!0,layout:{type:"fit"},initComponent:function(){this.items=[{xtype:"treepanel",itemId:"moduleTree",rootVisible:!1,store:Ext.create("School.store.auth.ModuleTree")}],this.buttons=[{text:"取消",itemId:"cancel"},{text:"保存",itemId:"save"}],this.callParent()}}),Ext.define("School.view.auth.module.BtnPermission",{extend:"Ext.grid.Panel",alias:"widget.btnpermission",columnLines:!0,viewConfig:{stripeRows:!0},requires:["School.store.auth.BtnPermission","School.store.auth.Role","School.store.auth.Module"],initComponent:function(){var e=this;e.store=Ext.create("School.store.auth.BtnPermission"),e.dockedItems=[{dock:"top",xtype:"toolbar",defaults:{xtype:"combo",labelWidth:70,valueField:"id",emptyText:"请选择...",editable:!1,triggerAAction:"all"},items:[{fieldLabel:"选择角色",itemId:"selectRole",store:Ext.create("School.store.auth.Role"),displayField:"role"},{disabled:!0,fieldLabel:"选择父模块",itemId:"selectParentModule",store:Ext.create("School.store.auth.Module"),displayField:"text",queryMode:"local"},{disabled:!0,fieldLabel:"选择子模块",itemId:"selectChildModule",store:Ext.create("School.store.auth.Module"),displayField:"text",queryMode:"local"},{xtype:"tbseparator"},{xtype:"button",text:"分配按钮权限",permissionId:"arrangeBtnPermission",itemId:"arrangeBtn",iconCls:"key"}]}],e.callParent()},columns:[{hidden:!0,dataIndex:"id"},{text:"对应的按钮权限",dataIndex:"permission",width:160,align:"center"},{text:"可用",dataIndex:"available",align:"center"},{text:"描述",dataIndex:"description",flex:1}]}),Ext.define("School.view.auth.role.ArrangeRole",{extend:"Ext.grid.Panel",alias:"widget.arrangerole",columnLines:!0,viewConfig:{stripeRows:!0},requires:["School.store.auth.ArrangeRole"],initComponent:function(){var e=this;e.store=Ext.create("School.store.auth.ArrangeRole"),e.dockedItems=[{dock:"top",xtype:"toolbar",items:[{text:"分配角色",itemId:"arrangeBtn",permissionId:"arrangeRole",iconCls:"key"}]}],e.callParent()},columns:[{hidden:!0,dataIndex:"id"},{text:"姓名",dataIndex:"name",align:"center"},{text:"当前角色",dataIndex:"roles",flex:1,renderer:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o].role);return t.join(", ")}}]}),Ext.define("School.view.auth.role.ArrangeRoleWin",{extend:"Ext.window.Window",alias:"widget.arrangerolewin",requires:["Ext.grid.*","Ext.layout.container.HBox","School.model.school.TeacherMgr","Ext.ux.Tips"],width:550,height:350,modal:!0,layout:{type:"hbox",align:"stretch",padding:5},initComponent:function(){var e=this.id+"group1",t=this.id+"group2",o=[{hidden:!0,dataIndex:"id"},{text:"角色名称",dataIndex:"role"},{text:"角色描述",flex:1,dataIndex:"description"}];this.items=[{itemId:"unarrangedGrid",flex:1,xtype:"grid",viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:e,dropGroup:t}},store:Ext.create("School.store.auth.Role"),columns:o,stripeRows:!0,title:"未分配的角色",margins:"0 5 0 0"},{itemId:"arrangedGrid",flex:1,xtype:"grid",viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:t,dropGroup:e}},store:Ext.create("School.store.auth.Role"),columns:o,stripeRows:!0,title:"已分配的角色"}],this.buttons=[{text:"取消",itemId:"cancel"},{text:"保存",itemId:"save"}],this.callParent()}}),Ext.define("School.view.auth.role.RoleMgr",{extend:"Ext.grid.Panel",alias:"widget.rolemgr",columnLines:!0,viewConfig:{stripeRows:!0},requires:["School.store.auth.Role"],initComponent:function(){var e=this;e.store=Ext.create("School.store.auth.Role"),e.dockedItems=[{dock:"top",xtype:"toolbar",items:[{text:"添加角色",itemId:"add",permissionId:"addRole",iconCls:"add"},{text:"编辑角色",itemId:"edit",permissionId:"editRole",iconCls:"edit"},{text:"删除角色",permissionId:"deleteRole",iconCls:"delete",itemId:"delete"}]}],e.callParent()},columns:[{hidden:!0,dataIndex:"id"},{text:"角色名称",dataIndex:"role",align:"center"},{text:"描述",dataIndex:"description",flex:1}]}),Ext.define("School.view.auth.role.RoleWin",{extend:"Ext.window.Window",alias:"widget.rolewin",requires:[],bodyPadding:"5 10",modal:!0,title:"角色编辑窗口",initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"form",defaults:{allowBlank:!1,xtype:"textfield",labelWidth:80,margin:"10 0 0 0",anchor:"100%",msgTarget:"under",afterLabelTextTpl:School.util.Util.required},items:[{name:"id",hidden:!0,allowBlank:!0},{fieldLabel:"角色名称",name:"role",maxLength:25,name:"role",itemId:"roleName"},{xtype:"textarea",name:"description",rows:10,fieldLabel:"角色描述",maxLength:64,itemId:"roleDes",value:"待补充……"}]}],buttons:[{text:"取消",itemId:"cancel"},{text:"保存",itemId:"save"},{text:"清空",itemId:"roleWinreset"}]}),e.callParent()}}),Ext.define("School.view.clazz.appraise.AddMobTpl",{extend:"Ext.window.Window",alias:"widget.addmobtpl",title:"添加移动端评语模板",closeAction:"destroy",modal:!0,initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:"anchor",defaults:{marginTop:"20px",allowBlank:!1,anchor:"100%",labelWidth:75,blankText:"不能为空",msgTarget:"under",afterLabelTextTpl:'<span style="color:red">*</span>'},items:[{name:"name",fieldLabel:"名字",xtype:"textfield"},{name:"score",fieldLabel:"评分",xtype:"combo",displayField:"score",valueField:"score",queryMode:"local",forceSelect:!0,editable:!1,value:5,store:Ext.create("Ext.data.Store",{fields:["score"],data:[{score:1},{score:2},{score:3},{score:4},{score:5}]})},{name:"file",xtype:"filefield",fieldLabel:"模板图片",buttonText:"浏览文件"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),e.callParent(arguments)}}),Ext.define("School.view.clazz.appraise.AppraiseMgr",{extend:"Ext.grid.Panel",alias:"widget.appraisemgr",requires:["School.store.clazz.Appraise","School.view.clazz.appraise.AppraiseToolbar"],initComponent:function(){var e=this;Ext.apply(e,{columnLines:!0,selType:"checkboxmodel",selModel:{mode:"MULTI"},store:Ext.create("School.store.clazz.Appraise"),dockedItems:[{dock:"top",xtype:"appraisetoolbar"}],columns:[{hidden:!0,dataIndex:"id"},{hidden:!0,dataIndex:"studentId"},{dataIndex:"studentName",text:"学生姓名",flex:1},{dataIndex:"studentNumber",text:"学号",flex:2},{dataIndex:"star",text:"评分",align:"center",flex:1},{dataIndex:"word",text:"评语",flex:10}]}),e.callParent(arguments)}}),Ext.define("School.view.clazz.appraise.AppraiseToolbar",{extend:"Ext.panel.Panel",xtype:"appraisetoolbar",requires:["School.store.school.Semester","School.store.clazz.Identity"],layout:{type:"vbox"},initComponent:function(){this.items=[{xtype:"toolbar",defaults:{labelWidth:60},items:[{text:"添加评价",itemId:"add",iconCls:"add"},{text:"删除评价",itemId:"delete",iconCls:"delete"},{text:"修改评价",itemId:"edit",iconCls:"edit"},{xtype:"tbseparator"},{text:"导出为Excel",itemId:"download",iconCls:"download"},{text:"评语模版管理",itemId:"wordTplMgr",hidden:!0,iconCls:"key"},{text:"上传评语模版",itemId:"createTpl",iconCls:"upload"},{text:"导出评语模板",itemId:"downloadTpl",iconCls:"download"},{text:"创建移动端评语模板",itemId:"createMobTpl",iconCls:"add"}]},{xtype:"container",defaults:{labelWidth:60,margin:"6 6 8 8"},layout:{type:"hbox"},items:[{xtype:"combo",width:200,fieldLabel:"学期选择",itemId:"termCombo",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:Ext.create("School.store.school.Semester",{autoLoad:!1}),queryMode:"remote"},{xtype:"combo",width:200,itemId:"stageCombo",fieldLabel:"学期阶段",queryMode:"local",displayField:"name",valueField:"name",forceSelect:!0,value:"期中",store:Ext.create("Ext.data.Store",{fields:["name"],data:[{name:"期中"},{name:"期末"}]})},{xtype:"combo",width:200,fieldLabel:"当前班级",itemId:"classCombo",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:zy_classes,queryMode:"local"},{xtype:"combo",width:200,itemId:"identityCombo",fieldLabel:"评价身份",emptyText:"请首先选择...",editable:!1,displayField:"name",valueField:"type",queryMode:"remote",store:Ext.create("School.store.clazz.Identity",{autoLoad:!0})}]}],this.callParent(arguments)}}),Ext.define("School.view.clazz.appraise.AppraiseWin",{extend:"Ext.window.Window",alias:"widget.appraisewin",requires:["School.view.clazz.appraise.WordTpl"],initComponent:function(){var e=this;Ext.apply(e,{layout:{type:"hbox",align:"stretch"},bodyPadding:"5 10",modal:!0,height:500,items:[{xtype:"form",title:"评价内容",defaults:{xtype:"combo",labelWidth:60,margin:"10 0 0 0",anchor:"100%"},items:[{name:"star",fieldLabel:"评分",displayField:"name",valueField:"name",value:5,store:Ext.create("Ext.data.Store",{fields:["name"],data:[{name:1},{name:2},{name:3},{name:4},{name:5}]})},{xtype:"textarea",name:"word",rows:12,fieldLabel:"评语"}]},{xtype:"wordtpl"}],buttons:[{text:"保存",itemId:"save"}]}),e.callParent()}}),Ext.define("School.view.clazz.appraise.CommentMgr",{extend:"Ext.grid.Panel",requiers:["School.store.clazz.CommentMgr"],alias:"widget.commentmgr",itemId:"commentmgr",forceFit:!0,initComponent:function(){this.store=Ext.create("School.store.clazz.CommentMgr",{autoLoad:!0}),this.columns=[{text:"id",dataIndex:"id",hidden:!0,flex:2},{text:"评语模板名字",dataIndex:"name",flex:2},{text:"分数",dataIndex:"score",flex:2},{text:"创建时间",dataIndex:"createTime",flex:2},{text:"状态",flex:2,dataIndex:"type",align:"center",renderer:function(e){return"pass"==e?"已审核":(e="unpass")?"待审核":"已下架"}},{xtype:"actioncolumn",header:"操作",align:"center",itemId:"operate",flex:2,items:[{iconCls:"menu_users",handler:function(e,t,o){this.fireEvent("itemClick",e,t,o)}}]}],this.dockedItems=[{xtype:"toolbar",dock:"top",items:[{xtype:"combo",fieldLabel:"请选择你要进行的操作",itemId:"tpltype",triggerAction:"all",queryMode:"local",displayField:"name",valueField:"type",width:300,labelWidth:150,editable:!1,forceSelect:!0,value:"unpass",store:Ext.create("Ext.data.Store",{fields:["name","type"],data:[{name:"审核",type:"unpass"},{name:"下架",type:"pass"},{name:"上架",type:"close"}]})}]}],this.callParent(arguments)}}),Ext.define("School.view.clazz.appraise.CreateTpl",{extend:"Ext.window.Window",closeAction:"destroy",alias:"widget.createtpl",closable:!0,autoShow:!0,modal:!0,require:["School.store.school.CourseMgr"],layout:{type:"fit",align:"stretch"},width:350,title:"上传评语模板",items:[{xtype:"form",border:!1,style:{padding:"10px"},layout:{type:"anchor"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:70,afterLabelTextTpl:'<span style="color:red">*</span>',labelSeparator:":",allowBlank:!1,style:{marginTop:"20px"}},items:[{fieldLabel:"适用学科",itemId:"fitToSubject",name:"subject",xtype:"combobox",triggerAction:"all",width:200,emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",queryMode:"remote",store:Ext.create("School.store.clazz.Identity",{})},{xtype:"radiogroup",fieldLabel:"模板类型",itemId:"type",columns:3,vertical:!0,defaults:{margin:"15 0"},items:[{name:"type",boxLabel:"个人模板",inputValue:"1",checked:!0},{name:"type",boxLabel:"超级模板",inputValue:"3",itemId:"super"}]},{name:"file",xtype:"filefield",itemId:"content",fieldLabel:"文件选择"}],buttons:[{text:"保存",itemId:"save"},{text:"取消",itemId:"cancel"}]}]}),Ext.define("School.view.clazz.appraise.IdentityWin",{extend:"Ext.window.Window",alias:"widget.identitywin",title:"请选择你的评价身份",initComponent:function(){var e=this;Ext.apply(e,{autoShow:!0,modal:!0,width:300,closable:!1,bodyPadding:"10 5 5 5",items:[{xtype:"component",margin:"0 0 10 0",html:"你想使用哪种身份进行评价？"},{xtype:"radiogroup",layout:{type:"anchor"},vertical:!0,items:[{boxLabel:"班主任",name:"type",inputValue:1,checked:!0},{boxLabel:"科任老师",name:"type",inputValue:0}]}],buttons:[{text:"确认选择",iconCls:"accept",itemId:"select"}]}),e.callParent(arguments)}}),Ext.define("School.view.clazz.appraise.WordTpl",{extend:"Ext.grid.Panel",alias:"widget.wordtpl",height:300,requires:["School.store.clazz.WordTpl","School.store.clazz.Subject"],title:"评语模版",width:700,margin:"0 0 0 10",hideHeaders:!0,initComponent:function(){var e=this;Ext.apply(e,{store:Ext.create("School.store.clazz.WordTpl"),selType:"checkboxmodel",selModel:{mode:"SINGLE",allowDeselect:!0},columns:[{dataIndex:"word",text:"评语",flex:1,itemId:"words"}],dockedItems:[{xtype:"toolbar",items:[{xtype:"radiogroup",itemId:"type",labelWidth:60,allowBlank:!0,fieldLabel:"模板类型",defaults:{margin:"0 5"},columns:2,labelAlign:"left",items:[{boxLabel:"个人",inputValue:"resultForTeacher",name:"type"},{boxLabel:"通用",name:"type",inputValue:"result",checked:!0}]}]}]}),e.callParent(arguments)}}),Ext.define("School.view.clazz.health.HealthMgr",{extend:"Ext.grid.Panel",alias:"widget.healthmgr",requires:["School.store.clazz.Health"],initComponent:function(){var e=this,t=Ext.create("School.store.clazz.Health");Ext.apply(e,{store:t,dockedItems:[{dock:"top",xtype:"toolbar",items:[{text:"修改学生健康信息",itemId:"editHealth",permissionId:"editHealth",iconCls:"edit"},{text:"删除学生健康信息",itemId:"deleteHealth",permissionId:"deleteHealth",iconCls:"delete"},{xtype:"tbseparator"},{xtype:"tbseparator"},{text:"上传班级健康表",iconCls:"upload",permissionId:"uploadHealth",itemId:"uploadHealth"},{text:"下载班级健康表",iconCls:"download",permissionId:"downloadHealth",itemId:"downloadHealth"},{xtype:"tbseparator"},{xtype:"tbseparator"},{xtype:"combobox",fieldLabel:"当前班级",labelWidth:60,itemId:"myclasses",triggerAction:"all",emptyText:"请选择...",editable:!1,displayField:"name",valueField:"id",store:zy_classes,queryMode:"local"},{text:"刷新",iconCls:"key",itemId:"refresh"}]},{xtype:"pagingtoolbar",dock:"bottom",store:t,displayInfo:!0}],columns:[{hidden:!0,dataIndex:"id"},{hidden:!0,dataIndex:"studentId"},{text:"学生名称",dataIndex:"studentName"},{text:"身高(cm)",dataIndex:"height"},{text:"体重(kg)",dataIndex:"weight"},{text:"血型",dataIndex:"bloodType"},{text:"血压",dataIndex:"bloodPressure"},{text:"左视力",dataIndex:"leftVision"},{text:"右视力",dataIndex:"rightVision"},{text:"左听力",dataIndex:"leftVision"},{text:"右听力",dataIndex:"rightVision"},{text:"口腔",dataIndex:"oral"},{text:"过敏",dataIndex:"allergy"},{text:"体温(摄氏度)",dataIndex:"bodyTem"},{text:"备注",dataIndex:"remarks"}]}),e.callParent()}}),Ext.define("School.view.clazz.health.StudentHealthWin",{extend:"Ext.window.Window",alias:"widget.studenthealthwin",autoShow:!0,modal:!0,width:500,layout:"fit",requires:["Ext.form.Panel","Ext.layout.container.Column"],initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"form",bodyPadding:10,layout:"column",items:[{columnWidth:.5,defaults:{margin:"10 0",xtype:"textfield",labelWidth:60},items:[{hidden:!0,name:"id"},{hidden:!0,name:"studentId"},{name:"studentName",fieldLabel:"学生姓名",readOnly:!0},{name:"height",fieldLabel:"身高(cm)"},{name:"bloodType",fieldLabel:"血型"},{name:"bloodPressure",fieldLabel:"血压"},{name:"oral",fieldLabel:"口腔"},{name:"historyMedical",fieldLabel:"既往病史"}]},{columnWidth:.5,defaults:{margin:10,xtype:"textfield",labelWidth:60},items:[{fieldLabel:"左视力",name:"leftVision"},{fieldLabel:"右视力",name:"rightVision"},{fieldLabel:"过敏",name:"allergy"},{fieldLabel:"体温(摄氏度)",name:"bodyTem"},{fieldLabel:"备忘",name:"remarks"}]}]}],buttons:[{text:"提交",itemId:"saveHealth"}]}),e.callParent()}}),Ext.define("School.view.clazz.health.UploadHealthWin",{extend:"Ext.window.Window",alias:"widget.uploadhealthwin",title:"上传班级健康表",closeAction:"destroy",autoShow:!0,modal:!0,width:350,layout:{type:"fit"},items:[{xtype:"form",defaults:{width:300,labelWidth:70,margin:10},items:[{xtype:"filefield",name:"file",allowBlank:!1,fieldLabel:"文件选择",buttonText:"浏览文件"}],buttons:[{text:"上传",itemId:"save"}]}]}),Ext.define("School.view.school.position.AllocatePosition",{extend:"Ext.window.Window",alias:"widget.allocateposition",requires:["Ext.grid.*","Ext.layout.container.HBox","School.model.school.TeacherMgr","Ext.ux.Tips"],autoShow:!0,width:650,height:300,layout:{type:"hbox",align:"stretch",padding:5},initComponent:function(){var e=this.id+"group1",t=this.id+"group2",o=[{text:"姓名",flex:1,sortable:!0,dataIndex:"name"},{text:"性别",width:80,sortable:!0,dataIndex:"sex"},{text:"教育程度",width:80,sortable:!0,dataIndex:"education"}];this.items=[{itemId:"doAllocateGrid",flex:1,xtype:"grid",viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:e,dropGroup:t}},store:Ext.create("School.store.school.TeacherMgr",{pageSize:1e3}),columns:o,stripeRows:!0,title:"所有教师",margins:"0 5 0 0"},{itemId:"undoAllocateGrid",flex:1,xtype:"grid",viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:t,dropGroup:e}},store:Ext.create("School.store.school.position.TeacherInPosition"),columns:o,stripeRows:!0,title:"已分配的教师"}],this.callParent()}}),Ext.define("School.view.school.position.PositionMgr",{extend:"Ext.grid.Panel",alias:"widget.positionmgr",requires:["School.store.school.position.Position"],forceFit:!0,initComponent:function(){var e=this;Ext.apply(e,{store:Ext.create("School.store.school.position.Position"),columns:[{hidden:!0,dataIndex:"id",flex:4},{text:"职位名称",dataIndex:"name",flex:4},{text:"职位简介",dataIndex:"comment",width:400,flex:4},{xtype:"actioncolumn",text:"删除",align:"center",itemId:"rmPosition",permissionId:"deletePosition",iconCls:"delete",flex:2,handler:function(e,t,o,a,l,i){this.fireEvent("itemclick","remove",i)}},{xtype:"actioncolumn",text:"查看和修改",align:"center",iconCls:"save",permissionId:"editPosition",itemId:"detailPosition",flex:2,handler:function(e,t,o,a,l,i){this.fireEvent("itemclick","detail",i)}}],dockedItems:[{xtype:"pagingtoolbar",store:Ext.create("School.store.school.position.Position"),dock:"bottom",displayInfo:!0},{xtype:"toolbar",dock:"top",items:[{text:"增加新职位",iconCls:"add",permissionId:"addPosition",itemId:"addPosition"},{text:"给选中的职位分配教师",permissionId:"arrangePosition",iconCls:"key",itemId:"allocatePosition"},{text:"查看该职位下的所有教师",permissionId:"getTeacherInPosition",itemId:"teacherInPosition"}]}]}),e.callParent()}}),Ext.define("School.view.school.position.PositionWin",{extend:"Ext.window.Window",alias:"widget.positionwin",requires:["Ext.form.field.TextArea","School.util.Util"],width:400,modal:!0,autoShow:!0,title:"职位",layout:"fit",initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"form",bodyPadding:10,defaults:{xtype:"textfield",labelWidth:80,anchor:"100%",msgTarget:"under"},items:[{fieldLabel:"职位名称",allowBlank:!1,afterLabelTextTpl:School.util.Util.required,emptyText:"职位名称不能为空",name:"name",maxLength:25},{xtype:"textarea",margin:"20 0",fieldLabel:"职位简介",name:"comment",maxLength:64},{hidden:!0,name:"id"}]}],buttons:[{text:"提交",itemId:"save"}]}),e.callParent()}}),Ext.define("School.view.school.position.TeacherInPosition",{extend:"Ext.window.Window",alias:"widget.teacherinpositionwin",requires:["School.store.school.position.TeacherInPosition"],width:500,height:400,autoShow:!0,layout:"fit",overflowY:"scroll",initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"grid",store:Ext.create("School.store.school.position.TeacherInPosition"),columns:[{hidden:!0,dataIndex:"id"},{text:"教师姓名",dataIndex:"name"},{text:"性别",dataIndex:"sex"},{text:"教育程度",dataIndex:"education"},{text:"电话",dataIndex:"phone"}]}]}),e.callParent()}});